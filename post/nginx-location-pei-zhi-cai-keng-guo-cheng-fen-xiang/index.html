<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="https://181016.xyz/favicon.ico" type="image/x-icon" /><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"><meta name="description"content="æ¸©æ•…è€ŒçŸ¥æ–°"><meta charset="UTF-8"><title>Nginx location é…ç½®è¸©å‘è¿‡ç¨‹åˆ†äº« | Gridea</title>
<link href="https://181016.xyz/styles/main.css" type="text/css" rel="stylesheet" /><link href="https://at.alicdn.com/t/font_1621793_zatzzgvf30g.css" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="https://181016.xyz/media/css/katex.css"><script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js"></script><script src="https://181016.xyz/media/js/magnify.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
<script type="text/javascript">function btn_toggle(){document.getElementById("hn").classList.contains("no-js")?document.getElementById("hn").classList.remove("no-js"):document.getElementById("hn").classList.add("no-js")}</script>

<link rel="canonical" href="https://181016.xyz/post/nginx-location-pei-zhi-cai-keng-guo-cheng-fen-xiang/" />
</head>
<body>
<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://181016.xyz"><img alt="logo" style="display:inline-block;" src="https://181016.xyz/images/avatar.png"/></a><h1 title="Gridea" class="weaklink"><a  href="/">Gridea</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div><div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form" data-update="1700192119215" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

<div class="main"><div class="main-inner"><div class="content">
<article class="post">
<h2 class="post_title sm_margin"><a>Nginx location é…ç½®è¸©å‘è¿‡ç¨‹åˆ†äº«</a></h2>
<script>function lan(){if(document.getElementById("lan").innerText=="ç¹"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç®€"}else{if(document.getElementById("lan").innerText=="ç°¡"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç¹"}}};</script>
<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px"> 2023-11-17</span><i class="iconfont icon-browse"></i><span style="margin-right:15px"> <span id="busuanzi_value_page_pv"></span> Views</span><i class="iconfont icon-category"></i><span class="weaklink" style="margin-right:15px"></span><i class="iconfont icon-caret-down"></i><span style="margin-right:15px">2238å­—</span><i class="iconfont icon-naozhong"></i><span style="margin-right:15px">10 min read</span><a id="lan" href="javascript:void(0);"onclick="lan();"title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
</section>

<div style="display:flex">
<div class="md_block" id="md_block">
<div class="round-shape-one"></div>
<p>åŸæ–‡é“¾æ¥ ï¼šhttps://ruby-china.org/topics/24090<br>
è¿™æ˜¯äº”ä¸ªå°æ—¶ä¸ä¸€ä¸ªå­—ç¬¦çš„æˆ˜æ–—<br>
æ˜¯çš„ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ å¾€å¾€å‘ç°ï¼Œæœ‰çš„æ—¶å€™ä½ èŠ±è´¹äº†æ•°å°æ—¶ï¼Œæ•°å¤©ï¼Œç”šè‡³æ•°æ˜ŸæœŸæ¥æŸ¥æ‰¾é—®é¢˜ï¼Œä½†æœ€ç»ˆå¯èƒ½åªèŠ±è´¹äº†æ•°ç§’ï¼Œæ”¹åŠ¨äº†æ•°è¡Œï¼Œç”šè‡³å‡ ä¸ªå­—ç¬¦å°±è§£å†³äº†é—®é¢˜ã€‚è¿™æ¬¡ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå›°æ‰°äº†æˆ‘å¾ˆä¹…ï¼Œæˆ‘èŠ±äº†äº”ä¸ªå°æ—¶æ‰æŸ¥æ‰¾å‡ºé—®é¢˜åŸå› ï¼Œæœ€ç»ˆåªæ·»åŠ äº†ä¸€ä¸ªå­—ç¬¦è§£å†³äº†çš„é—®é¢˜ã€‚</p>
<p>é—®é¢˜æè¿°<br>
æˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿæ¯”è¾ƒå¤æ‚ï¼Œä½†æœ€ç»ˆæä¾›ç»™ç”¨æˆ·çš„è®¿é—®æ¥å£æ¯”è¾ƒå•ä¸€ï¼Œéƒ½æ˜¯ä½¿ç”¨ Nginx æ¥åšä¸€ä¸ªä»£ç†è½¬å‘ï¼Œè€Œè¿™ä¸ªä»£ç†è½¬å‘ï¼Œå¾€å¾€éœ€è¦åŒ¹é…å¾ˆå¤šç§ä¸åŒç±»å‹çš„ URL è½¬ç»™ä¸åŒçš„æœåŠ¡ã€‚è¿™å°±ä½¿å¾—æˆ‘ä»¬çš„ Nginx é…ç½®æ–‡ä»¶å˜å¾—å¾ˆå¤æ‚ï¼Œç²—ç•¥ä¼°è®¡äº†ä¸‹ï¼Œæˆ‘ä»¬æœ‰è¿‘ 20 ä¸ª upstreamï¼Œæœ‰è¿‘ 60 ä¸ª location åŒ¹é…ã€‚è¿™äº›é…ç½®æŒ‰ç…§æ¨¡å—åˆ†å¸ƒåœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œè™½ç„¶å¤æ‚ï¼Œä½†æ˜¯ä»ç„¶åœ¨æˆ‘ä»¬çš„åŠªåŠ›ä¸‹è¿è¡Œçš„è‰¯å¥½ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæœ‰ä½åŒäº‹ç»™æˆ‘åæ˜ è¯´å¶å°”æœ‰äº› URL ä¼šå‡ºç° 404 çš„é—®é¢˜ã€‚ä¸€å¼€å§‹æ²¡å¤ªåœ¨æ„ï¼Œå› ä¸ºä»–ä¹Ÿè¯´ä¸å‡†æ˜¯å“ªä¸€ç§ URL æ‰é‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>é—®é¢˜æŸ¥æ‰¾<br>
åæ¥ï¼Œæ…¢æ…¢çš„æŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†ä¸€äº›è§„å¾‹ï¼Œä¸€å¼€å§‹åªçŸ¥é“æ˜¯ tomcat é‚£è¾¹è¿”å› 404 äº†ï¼Œæƒ³åˆ° Nginx éƒ½ä»£ç†ç»™äº† tomcatï¼Œä¸€å¼€å§‹å°±æ€€ç–‘æ˜¯ç¨‹åºçš„é—®é¢˜ï¼Œä¸ä¼šæƒ³åˆ°æ˜¯ Nginxã€‚</p>
<p>æˆ‘å¼€å§‹æŸ¥æ‰¾ä»£ç çš„é—®é¢˜ï¼Œæˆ‘åœ¨æœ¬åœ°çš„å¼€å‘ç¯å¢ƒï¼Œå°è¯•äº†å¾ˆä¹…ï¼Œæˆ‘ä½¿ç”¨ 8080 ç«¯å£è®¿é—®ï¼Œä¸è®ºå¦‚ä½•éƒ½æ˜¯æ­£ç¡®çš„ç»“æœï¼Œå¯æ˜¯ç”Ÿäº§ç¯å¢ƒå°±æ˜¯ä¸è¡Œã€‚ç„¶åæˆ‘å°±å¬ä¿¡äº†æŸå‘å‹åŒäº‹çš„ç†è®ºï¼Œé‡å¯è§£å†³ 95% çš„é—®é¢˜ï¼Œé‡è£…è§£å†³ 100% çš„é—®é¢˜ï¼Œæˆ‘å°è¯•é‡å¯äº† tomcat å’Œ Nginxï¼Œä¾ç„¶ä¸è¡Œï¼Œç„¶åæ˜¯é‡è£…ï¼Œä½ çŒœç»“æœå¦‚ä½•ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ ------æƒ³å•¥å‘¢ï¼Ÿå½“ç„¶ä¹Ÿæ˜¯ä¸è¡Œï¼</p>
<p>åæ¥å°±å¼€å§‹æ€€ç–‘æ˜¯ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒçš„å·®å¼‚ï¼Œå»æœåŠ¡å™¨ä¸Šè®¿é—® 8080 ç«¯å£ï¼Œä»ç„¶æ˜¯å¯ä»¥çš„ã€‚å¯æ˜¯ä¸€ç»è¿‡ Nginx ä»£ç†ï¼Œå°±ä¸è¡Œã€‚è¿™ä¸ªæ—¶å€™æ‰å¼€å§‹æ€€ç–‘æ˜¯ Nginx å‡ºäº†ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>Nginx æ€ä¹ˆä¼šå‡ºé—®é¢˜å‘¢ï¼Œä¸šåŠ¡ç³»ç»Ÿä¸­ URL æ¨¡å¼ /helloworld/* ,è¿™æ ·çš„ URL æˆ‘ä»¬éƒ½æ˜¯ç»Ÿä¸€å¤„ç†çš„ã€‚æ€ä¹ˆä¼šå‡ºç°ä¸€äº›è¡Œï¼Œä¸€äº›ä¸è¡Œå‘¢ã€‚é—®é¢˜è¡¨ç°ä¸º A URLï¼ˆ/helloworld/nn/hello/worldï¼‰æ²¡é—®é¢˜ï¼Œè€Œ B URL(/helloworld/ii/hello/world) æœ‰é—®é¢˜ã€‚</p>
<p>æ‰€ä»¥åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŸºæœ¬å¯ä»¥è‚¯å®šæ˜¯ Nginx çš„ location ä¸Šå‡ºäº†ä¸€äº›é—®é¢˜ã€‚</p>
<p>é—®é¢˜è§£å†³<br>
å› ç¯‡å¹…æœ‰é™ï¼Œä¸ºäº†ç›´é¢æœ¬æ¬¡é—®é¢˜çš„æ ¸å¿ƒï¼Œæˆ‘ä¸å†è´´å‡ºå®Œæ•´çš„ Nginx é…ç½®ï¼Œæˆ‘ç®€åŒ–æ­¤æ¬¡é—®é¢˜çš„æ¨¡å‹ã€‚è¯·çœ‹å¦‚ä¸‹ Nginx é…ç½®ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¹‹å‰çš„ä¼šå¯¼è‡´é—®é¢˜çš„é”™è¯¯é…ç½®æ¨¡å‹ã€‚</p>
<p>worker_processes  1;<br>
error_log  logs/error.log;<br>
events {<br>
worker_connections  1024;<br>
}</p>
<p>http {<br>
include       mime.types;<br>
default_type  application/octet-stream;<br>
log_format  main  '$remote_addr - $request_time - <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>t</mi><msub><mi>e</mi><mi>u</mi></msub><mi>s</mi><mi>e</mi><mi>r</mi><mo>[</mo></mrow><annotation encoding="application/x-tex">remote_user [</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">u</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">[</span></span></span></span>time_local] &quot;<span class='katex-error' title='ParseError: KaTeX parse error: Double superscript at position 34: â€¦               &#039;Ì²'>request&quot; &#039;
                      &#039;</span>status <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>o</mi><mi>d</mi><msub><mi>y</mi><mi>b</mi></msub><mi>y</mi><mi>t</mi><mi>e</mi><msub><mi>s</mi><mi>s</mi></msub><mi>e</mi><mi>n</mi><mi>t</mi><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">body_bytes_sent &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord">&quot;</span></span></span></span>http_referer&quot; '<br>
'&quot;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>t</mi><mi>t</mi><msub><mi>p</mi><mi>u</mi></msub><mi>s</mi><mi>e</mi><msub><mi>r</mi><mi>a</mi></msub><mi>g</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi mathvariant="normal">&quot;</mi><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">http_user_agent&quot; &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">u</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord">&quot;</span><span class="mord">&quot;</span></span></span></span>http_x_forwarded_for&quot;';</p>
<pre><code>access_log  logs/access.log main;

sendfile        on;
keepalive_timeout  65;

gzip  on;

server {
    listen       80;
    server_name  localhost;
    location / {
        root   html;
        index  index.html index.htm;
    }
    location = /helloworld {
            return 602;
    }
    location /helloworld {
            return 603;
    }

    ## ç”Ÿäº§ç¯å¢ƒä¸­å¦‚ä¸‹ä¸¤ä¸ª location åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé€šè¿‡ include åŒ…å«è¿›æ¥
    location /ii {
            return 604;
    }
    location ~ /ii/[^\/]+/[^\/]+ {
            return 605;
    }
    ##

    location ~ ^/helloworld/(scripts|styles|images).* {
            return 606;
    }
}
</code></pre>
<p>}<br>
æ³¨æ„ï¼Œè¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œç”Ÿäº§ç¯å¢ƒçš„ Nginx æœåŠ¡å™¨é…ç½®æ–‡ä»¶æ¯”è¿™é‡Œè¦å¤æ‚å¾ˆå¤šï¼Œè€Œä¸”æ˜¯æŒ‰æ¨¡å—åˆ†å¸ƒåœ¨ä¸åŒçš„æ–‡ä»¶ä¸­çš„ã€‚è¿™é‡Œç®€åŒ–æ¨¡å‹åï¼Œä½¿ç”¨ Http å“åº”çŠ¶æ€ç  60x æ¥åŒºåˆ†åˆ°åº•è¢«å“ªä¸ª location åŒ¹é…åˆ°äº†ã€‚ æˆ‘é’ˆå¯¹å½“æ—¶çš„æƒ…å†µï¼Œåšäº†å¤§é‡å°è¯•ï¼Œæœ€ç»ˆçš„ç®€åŒ–ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p>
<p>å°è¯• 1ï¼šhttp://localhost/helloworld ==&gt; 602 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 2ï¼šhttp://localhost/helloworld/hello ==&gt; 603 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 3ï¼šhttp://localhost/ii ==&gt; 604 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 4ï¼šhttp://localhost/ii/oo ==&gt; 604 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 5ï¼šhttp://localhost/ii/pp/kk ==&gt; 605 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 6ï¼šhttp://localhost/ii/pp/kk/ll ==&gt; 605 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 7ï¼šhttp://localhost/helloworld/scripts/aaa.js ==&gt; 606 ç¬¦åˆé¢„æœŸ<br>
å°è¯• 8ï¼šhttp://localhost/helloworld/ii/hello/world ==&gt; 605 ä¸ç¬¦åˆé¢„æœŸï¼Œé¢„æœŸä¸ºã€603ã€‘<br>
ä¸Šé¢è¿™äº›å°è¯•æ”¯æŒè¯»è€…è‡ªè¡Œè¯•éªŒï¼ŒNginx é…ç½®æ–‡ä»¶æ˜¯å®Œæ•´å¯ç”¨çš„ï¼Œæˆ‘æœ¬åœ° Nginx çš„ç‰ˆæœ¬æ˜¯ 1.6.2<br>
é—®é¢˜å°±åœ¨è¿™é‡Œï¼šæˆ‘è¿™é‡Œæ˜¯äº‹åï¼ŒæŠŠè¿™äº›åŒ¹é… location æ ‡è®°æˆäº†ä¸åŒçš„å“åº”ç ï¼Œæ‰æ–¹ä¾¿æŸ¥æ‰¾é—®é¢˜ã€‚å½“å‘ç°è¿™ä¸ªä¸ç¬¦åˆé¢„æœŸåï¼Œæˆ‘è¿˜æ˜¯éš¾ä»¥ç†è§£ï¼Œä¸ºä½•æˆ‘ä¸€ä¸ªä»¥ /helloworld å¼€å¤´çš„ URL ä¼šè¢«åŒ¹é…åˆ° 605 è¿™ä¸ªä»¥ /ii å¼€å¤´çš„ location é‡Œé¢æ¥ã€‚åœ¨å½“æ—¶çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä»¥ /ii çš„é…ç½®ç»Ÿä¸€æ”¾åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™é‡Œæ˜¯å¾ˆéš¾ç›´è§‚çš„å¯Ÿè§‰å‡ºæ¥è¿™ä¸ª /ii è·Ÿè®¿é—®çš„ URL é‡Œé¢çš„ /ii çš„å…³ç³»ã€‚</p>
<p>æˆ‘ä¸å¾—ä¸é‡æ–°ç¼–è¯‘äº† Nginxï¼ŒåŠ ä¸Šäº†è°ƒè¯•å‚æ•°ï¼Œä¿®æ”¹é…ç½®é¡¹ï¼Œçœ‹è°ƒè¯•æ—¥å¿—äº†ã€‚</p>
<p>è¿™é‡Œä¸å†è®²å¦‚ä½•ç»™ Nginx åŠ è°ƒè¯•çš„ç¼–è¯‘å‚æ•°ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹ç›¸å…³æ–‡æ¡£ã€‚ä¿®æ”¹é…ç½®é¡¹å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨</p>
<p>error_log  logs/error.log;<br>
åé¢åŠ ä¸Š debug å°±å¯ä»¥äº†ã€‚</p>
<p>æ‰“å‡ºè¯¦ç»†è°ƒè¯•æ—¥å¿—åï¼Œè®¿é—®</p>
<p>http://localhost/helloworld/ii/hello/world<br>
æˆ‘å¾—åˆ°äº†è¿™æ ·çš„ä¸€æ®µæ—¥å¿— (çœç•¥æ‰äº†å‰åæ— ç”¨çš„æ—¥å¿—ï¼Œåªä¿ç•™æœ‰æ„ä¹‰çš„ä¸€æ®µ)ï¼š</p>
<p>2015/02/02 15:38:48 [debug] 5801#0: *60 http request line: &quot;GET /helloworld/ii/hello/world HTTP/1.1&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http uri: &quot;/helloworld/ii/hello/world&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http args: &quot;&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http exten: &quot;&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http process request header line<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http header: &quot;User-Agent: curl/7.37.1&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http header: &quot;Host: localhost&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http header: &quot;Accept: <em>/</em>&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http header done<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 event timer del: 4: 1422862788055<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 rewrite phase: 0<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 test location: &quot;/&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 test location: &quot;ii&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 test location: &quot;helloworld&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 test location: ~ &quot;/ii/[<sup>/]+/[</sup>/]+&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 using configuration &quot;/ii/[<sup>/]+/[</sup>/]+&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http cl:-1 max:1048576<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 rewrite phase: 2<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http finalize request: 605, &quot;/helloworld/ii/hello/world?&quot; a:1, c:1<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http special response: 605, &quot;/helloworld/ii/hello/world?&quot;<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 http set discard body<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 posix_memalign: 00007FC3BB816000:4096 @16<br>
2015/02/02 15:38:48 [debug] 5801#0: *60 HTTP/1.1 605<br>
Server: nginx/1.6.2<br>
Date: Mon, 02 Feb 2015 07:38:48 GMT<br>
Content-Length: 0<br>
Connection: keep-alive<br>
å¯ä»¥çœ‹åˆ°ï¼ŒNginx æµ‹è¯•äº†å‡ æ¬¡ location åŒ¹é…ï¼Œæœ€ç»ˆé€‰æ‹©äº†</p>
<p>~ &quot;/ii/[<sup>/]+/[</sup>/]+&quot;<br>
è¿™ä¸ªä½œä¸ºæœ€ç»ˆçš„åŒ¹é…é¡¹ã€‚åˆ°è¿™é‡Œé—®é¢˜å°±å®Œå…¨å±•ç°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬æœ¬æ¥çš„æ„æ€ï¼Œæ˜¯è¦ä»¥ /ii å¼€å¤´ï¼Œåé¢æœ‰ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„ / åˆ†å‰²çš„ URL æ¨¡å‹æ‰åŒ¹é…ï¼Œä½†æ˜¯è¿™é‡Œçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å†™çš„ä¸å¤Ÿç²¾å‡†ï¼Œå¯¼è‡´äº†åŒ¹é…é”™è¯¯ã€‚æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰é™åˆ¶å¿…é¡»ä»å¼€å¤´åŒ¹é…ï¼Œæ‰€ä»¥æ‰ä¼šåŒ¹é…åˆ° /helloworld/ii/hello/world è¿™æ ·çš„ URLã€‚</p>
<p>è§£å†³åŠæ³•å°±æ˜¯åœ¨è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å‰é¢åŠ ä¸Š ^ æ¥å¼ºåˆ¶ URL å¿…é¡»ä»¥ /ii å¼€å¤´æ‰èƒ½åŒ¹é…. ç”±</p>
<p>/ii/[<sup>/]+/[</sup>/]+<br>
å˜æˆ</p>
<p><sup>/ii/[</sup>/]+/[^/]+<br>
è‡³æ­¤ï¼Œè¿™ä¸ªå‘è¢«å¡«ä¸Šäº†ï¼Œæ¶ˆè€—çš„æ˜¯äº”ä¸ªå°æ—¶å’Œä¸€ä¸ªå­—ç¬¦ã€‚</p>
<p>ç›¸ä¿¡å¾ˆå¤šäººåœ¨å†™ Nginx çš„ location çš„æ—¶å€™éƒ½ä¼š location ~ /xxx æˆ–è€… location /iii è¿™æ ·ç®€å•äº†äº‹ï¼Œä½†æ˜¯æˆ‘æƒ³è¯´çš„æ˜¯èƒ½å°½é‡ç²¾ç¡®å°±å°½é‡ç²¾ç¡®ï¼Œå¦åˆ™å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œéå¸¸éš¾ä»¥æŸ¥æ‰¾ã€‚</p>
<p>æœ‰å…³ Nginx çš„ location åŒ¹é…è§„åˆ™ï¼Œå¯ä»¥æŸ¥çœ‹ï¼šhttp://nginx.org/en/docs/http/ngx_http_core_module.html<br>
é—®é¢˜æ€»ç»“<br>
è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œå´ä¹Ÿéšå«äº†ä¸å°‘é—®é¢˜ï¼Œå€¼å¾—æˆ‘ä»¬æ·±æ€ã€‚</p>
<p>è®¡ç®—æœºæˆ–è€…è½¯ä»¶å‡ºçš„é—®é¢˜å¾€å¾€æ˜¯ç¡®å®šçš„ï¼Œä½ å‘ç°ä»–æ‰æ‘¸ä¸å®šçš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯æ²¡æœ‰è§‚å¯Ÿåˆ°é—®é¢˜ç‚¹<br>
è¿½è¸ªä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¿…ç°æ–¹å¼ï¼Œä¸€å®šè¦ç´§è¿½ä¸èˆï¼Œè¿™å°±æ˜¯æ‰€è°“çº¿ç´¢<br>
å½“ä½ å®åœ¨æ˜¯æ‰¾ä¸åˆ°é—®é¢˜æ‰€åœ¨çš„æ—¶å€™ï¼Œè¦æ€€ç–‘ä¸€ä¸‹ä¹‹å‰è¢«è‡ªå·±æ’é™¤æ‰çš„å¯èƒ½æ€§<br>
å€ŸåŠ©å„ä¸ªç»„ä»¶çš„è¯¦ç»†è°ƒè¯•æ—¥å¿—æ¥æŸ¥æ‰¾é—®é¢˜ï¼Œå¾€å¾€èƒ½å¾—åˆ°æ„æƒ³ä¸åˆ°çš„æ•ˆæœ<br>
ç¨‹åºå‘˜çš„ä»·å€¼ä¸æ˜¯ç”¨è¡Œæ•°ï¼Œå­—æ•°ï¼Œæäº¤æ•°è¡¡é‡çš„ï¼<br>
æœ¬æ–‡ä½œè€…ï¼š [ç‹æŒ¯å¨][1] æ–‡ç« å‡ºè‡ªï¼š [Coding å®˜æ–¹æŠ€æœ¯åšå®¢][2] å¦‚éœ€è½¬è½½ï¼Œè¯·æ³¨æ˜ä½œè€…ä¸å‡ºå¤„ï¼Œè°¢è°¢</p>

<span id="footnote"></span>
<div id = "warn"></div>
</div>
<div class="toc-container"></div>
</div>
<div id="fullPage"><canvas id="canvas"></canvas></div>
</article>
<div id="eof"><span>EOF</span></div><div class="round-shape-one"></div>
<section>
<div class="doc_comments">

</div></section>
</div></div></div><script>
"use strict";!function(){for(var n=document.getElementsByTagName("pre"),e=n.length,s=0;s<e;s++){n[s].innerHTML='<span class="line-number"></span>'+n[s].innerHTML+'<span class="cl"></span>';for(var a=n[s].innerHTML.split(/\n/).length,r=0;r<a-1;r++){n[s].getElementsByTagName("span")[0].innerHTML+="<span>"+(r+1)+"</span>"}}}();
let mainNavLinks=document.querySelectorAll(".markdownIt-TOC a");window.addEventListener("scroll",event=>{let fromTop=window.scrollY;mainNavLinks.forEach((link,index)=>{let section=document.getElementById(decodeURI(link.hash).substring(1));let nextSection=null
if(mainNavLinks[index+1]){nextSection=document.getElementById(decodeURI(mainNavLinks[index+1].hash).substring(1));}
if(section.offsetTop<=fromTop){if(nextSection){if(nextSection.offsetTop>fromTop){link.classList.add("currentToc");}else{link.classList.remove("currentToc");}}else{link.classList.add("currentToc");}}else{link.classList.remove("currentToc");}});});
var list=document.querySelectorAll(".katex");for(var i=0;i<list.length;i++){list[i].style.display="unset"};
var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector(".progress"),scroll;document.addEventListener("scroll",function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;progress.style.setProperty("--scroll",scroll+"%")});
var wxScale=new WxScale({fullPage:document.querySelector("#fullPage"),canvas:document.querySelector("#canvas")});var imgBox=document.querySelectorAll("#md_block img");for(var i=0;i<imgBox.length;i++){imgBox[i].onclick=function(e){wxScale.start(this)}};
content="æœ¬æ–‡æœ€åæ›´æ–°äº2023-11-17ï¼Œå·²è¶…è¿‡ 1 å¹´æ²¡æœ‰æ›´æ–°ï¼Œæ¶‰åŠçš„å†…å®¹å¯èƒ½å·²ç»å¤±æ•ˆï¼";var date1="2023-11-17 11:34:39";date1=date1.replace("-","/");var date2=new Date();var date3=date2.getTime()-new Date(date1).getTime();var days=Math.floor(date3/(24*3600*1000));if(days>=365){document.getElementById("warn").innerHTML=content};
</script>
<style>#magnifyImg{position:fixed;left:0;top:0;text-align:center;width:100%;display:none;z-index:9999}#magnifyImg img{object-fit:contain;background:#eaecef;padding:15px;border-radius:10px;height:auto;width:auto;vertical-align:middle}</style>
<a id="scrollUp" href="#top" style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"></div></div><div class="copyright"id="copyright">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>Copyright Â© 2018-2020 <a href="https://181016.xyz" style="margin:0;">Gridea</a>.</div>
<span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="busuanzi_value_site_uv"></span></strong></span><span id="busuanzi_container_page_pv" style="display: inline;"><span>ğŸ“š<strong>42</strong> posts</span></div></div>
<script>
console.log("\n %c \u26a1Theme: Bitcron-pro Author's Blog:https://blog.blinkstar.cn  Writen By Serence  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;", );
</script>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>
<script type="text/javascript" async src="https://181016.xyz/media/js/prism.js"></script>
</body>
</html>
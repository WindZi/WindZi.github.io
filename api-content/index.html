{"posts":[{"title":"Nginx location 配置踩坑过程分享","content":"原文链接：https://ruby-china.org/topics/24090这是五个小时与一个字符的战斗是的，作为一个程序员，你往往发现，有的时候你花费了数小时，数天，甚至数星期来查找问题，但最终可能只花费了数秒，改动了数行，甚至几个字符就解决了问题。这次给大家分享一个困扰了我很久，我花了五个小时才查找出问题原因，最终只添加了一个字符解决了的问题。问题描述我们的业务系统比较复杂，但最终提供给用户的访问接口比较单一，都是使用Nginx来做一个代理转发，而这个代理转发，往往需要匹配很多种不同类型的URL转给不同的服务。这就使得我们的Nginx配置文件变得很复杂，粗略估计了下，我们有近20个upstream，有近60个location匹配。这些配置按照模块分布在不同的文件中，虽然复杂，但是仍然在我们的努力下运行的良好。直到有一天，有位同事给我反映说偶尔有些URL会出现404的问题。一开始没太在意，因为他也说不准是哪一种URL才遇到这个问题。问题查找后来，慢慢的查找，找到了一些规律，一开始只知道是tomcat那边返回404了，想到Nginx都代理给了tomcat，一开始就怀疑是程序的问题，不会想到是Nginx。我开始查找代码的问题，我在本地的开发环境，尝试了很久，我使用8080端口访问，不论如何都是正确的结果，可是生产环境就是不行。然后我就听信了某坑友同事的理论，重启解决95%的问题，重装解决100%的问题，我尝试重启了tomcat和Nginx，依然不行，然后是重装，你猜结果如何？？？？？------想啥呢？当然也是不行！后来就开始怀疑是生产环境和开发环境的差异，去服务器上访问8080端口，仍然是可以的。可是一经过Nginx代理，就不行。这个时候才开始怀疑是Nginx出了什么问题。Nginx怎么会出问题呢，业务系统中URL模式/helloworld/*,这样的URL我们都是统一处理的。怎么会出现一些行，一些不行呢。问题表现为AURL（/helloworld/nn/hello/world）没问题，而BURL(/helloworld/ii/hello/world)有问题。所以到目前为止，基本可以肯定是Nginx的location上出了一些问题。问题解决因篇幅有限，为了直面本次问题的核心，我不再贴出完整的Nginx配置，我简化此次问题的模型。请看如下Nginx配置，这是我们之前的会导致问题的错误配置模型。worker_processes1;error_loglogs/error.log;events{worker_connections1024;}http{includemime.types;default_typeapplication/octet-stream;log_formatmain'$remote_addr-$request_time-remoteuser[remote_user[remoteu​ser[time_local]&quot;request&quot;&#039;&#039;statusbodybytessent&quot;body_bytes_sent&quot;bodyb​ytess​ent&quot;http_referer&quot;''&quot;httpuseragent&quot;&quot;http_user_agent&quot;&quot;httpu​sera​gent&quot;&quot;http_x_forwarded_for&quot;';access_loglogs/access.logmain;sendfileon;keepalive_timeout65;gzipon;server{listen80;server_namelocalhost;location/{roothtml;indexindex.htmlindex.htm;}location=/helloworld{return602;}location/helloworld{return603;}##生产环境中如下两个location在另外一个文件中，通过include包含进来location/ii{return604;}location~/ii/[^\\/]+/[^\\/]+{return605;}##location~^/helloworld/(scripts|styles|images).*{return606;}}}注意，这里有几点需要说明一下，生产环境的Nginx服务器配置文件比这里要复杂很多，而且是按模块分布在不同的文件中的。这里简化模型后，使用Http响应状态码60x来区分到底被哪个location匹配到了。我针对当时的情况，做了大量尝试，最终的简化版本如下：尝试1：http://localhost/helloworld==&gt;602符合预期尝试2：http://localhost/helloworld/hello==&gt;603符合预期尝试3：http://localhost/ii==&gt;604符合预期尝试4：http://localhost/ii/oo==&gt;604符合预期尝试5：http://localhost/ii/pp/kk==&gt;605符合预期尝试6：http://localhost/ii/pp/kk/ll==&gt;605符合预期尝试7：http://localhost/helloworld/scripts/aaa.js==&gt;606符合预期尝试8：http://localhost/helloworld/ii/hello/world==&gt;605不符合预期，预期为【603】上面这些尝试支持读者自行试验，Nginx配置文件是完整可用的，我本地Nginx的版本是1.6.2问题就在这里：我这里是事后，把这些匹配location标记成了不同的响应码，才方便查找问题。当发现这个不符合预期后，我还是难以理解，为何我一个以/helloworld开头的URL会被匹配到605这个以/ii开头的location里面来。在当时的生产环境中，以/ii的配置统一放在另外一个文件中，这里是很难直观的察觉出来这个/ii跟访问的URL里面的/ii的关系。我不得不重新编译了Nginx，加上了调试参数，修改配置项，看调试日志了。这里不再讲如何给Nginx加调试的编译参数，可自行查看相关文档。修改配置项很简单，只需要在error_loglogs/error.log;后面加上debug就可以了。打出详细调试日志后，访问http://localhost/helloworld/ii/hello/world我得到了这样的一段日志(省略掉了前后无用的日志，只保留有意义的一段)：2015/02/0215:38:48[debug]5801#0:*60httprequestline:&quot;GET/helloworld/ii/hello/worldHTTP/1.1&quot;2015/02/0215:38:48[debug]5801#0:*60httpuri:&quot;/helloworld/ii/hello/world&quot;2015/02/0215:38:48[debug]5801#0:*60httpargs:&quot;&quot;2015/02/0215:38:48[debug]5801#0:*60httpexten:&quot;&quot;2015/02/0215:38:48[debug]5801#0:*60httpprocessrequestheaderline2015/02/0215:38:48[debug]5801#0:*60httpheader:&quot;User-Agent:curl/7.37.1&quot;2015/02/0215:38:48[debug]5801#0:*60httpheader:&quot;Host:localhost&quot;2015/02/0215:38:48[debug]5801#0:*60httpheader:&quot;Accept:/&quot;2015/02/0215:38:48[debug]5801#0:*60httpheaderdone2015/02/0215:38:48[debug]5801#0:*60eventtimerdel:4:14228627880552015/02/0215:38:48[debug]5801#0:*60rewritephase:02015/02/0215:38:48[debug]5801#0:*60testlocation:&quot;/&quot;2015/02/0215:38:48[debug]5801#0:*60testlocation:&quot;ii&quot;2015/02/0215:38:48[debug]5801#0:*60testlocation:&quot;helloworld&quot;2015/02/0215:38:48[debug]5801#0:*60testlocation:~&quot;/ii/[/]+/[/]+&quot;2015/02/0215:38:48[debug]5801#0:*60usingconfiguration&quot;/ii/[/]+/[/]+&quot;2015/02/0215:38:48[debug]5801#0:*60httpcl:-1max:10485762015/02/0215:38:48[debug]5801#0:*60rewritephase:22015/02/0215:38:48[debug]5801#0:*60httpfinalizerequest:605,&quot;/helloworld/ii/hello/world?&quot;a:1,c:12015/02/0215:38:48[debug]5801#0:*60httpspecialresponse:605,&quot;/helloworld/ii/hello/world?&quot;2015/02/0215:38:48[debug]5801#0:*60httpsetdiscardbody2015/02/0215:38:48[debug]5801#0:*60posix_memalign:00007FC3BB816000:4096@162015/02/0215:38:48[debug]5801#0:*60HTTP/1.1605Server:nginx/1.6.2Date:Mon,02Feb201507:38:48GMTContent-Length:0Connection:keep-alive可以看到，Nginx测试了几次location匹配，最终选择了~&quot;/ii/[/]+/[/]+&quot;这个作为最终的匹配项。到这里问题就完全展现出来了，我们本来的意思，是要以/ii开头，后面有两个或者更多的/分割的URL模型才匹配，但是这里的正则表达式匹配写的不够精准，导致了匹配错误。正则表达式没有限制必须从开头匹配，所以才会匹配到/helloworld/ii/hello/world这样的URL。解决办法就是在这个正则表达式前面加上^来强制URL必须以/ii开头才能匹配.由/ii/[/]+/[/]+变成/ii/[/]+/[^/]+至此，这个坑被填上了，消耗的是五个小时和一个字符。相信很多人在写Nginx的location的时候都会location~/xxx或者location/iii这样简单了事，但是我想说的是能尽量精确就尽量精确，否则出现问题的时候，非常难以查找。有关Nginx的location匹配规则，可以查看：http://nginx.org/en/docs/http/ngx_http_core_module.html问题总结这个问题看似简单，却也隐含了不少问题，值得我们深思。计算机或者软件出的问题往往是确定的，你发现他捉摸不定的时候，往往是没有观察到问题点追踪一个问题，如果有一个必现方式，一定要紧追不舍，这就是所谓线索当你实在是找不到问题所在的时候，要怀疑一下之前被自己排除掉的可能性借助各个组件的详细调试日志来查找问题，往往能得到意想不到的效果程序员的价值不是用行数，字数，提交数衡量的！本文作者：[王振威][1]文章出自：[Coding官方技术博客][2]如需转载，请注明作者与出处，谢谢","link":"https://181016.xyz/post/nginx-location-pei-zhi-cai-keng-guo-cheng-fen-xiang/"},{"title":"https://www.kejicode.cn/index.php/archives/39/","content":"【第二期】史上最强免费VPN：WARP安卓、苹果手机端优选IP+无限流量保姆级教程，Team账户跳过绑卡，保证速度起飞！-科技源代码哈喽，大家好，这里是科技源代码。本期视频接着上一期，给大家说一下在如何获取WARP的配置文件，以及安卓，和苹果端如何优选ip，顺带解决一下上一期视频发出后，很多同学遇到的问题。所以没有看上一期视...哈喽，大家好，这里是科技源代码。本期视频接着上一期，给大家说一下在如何获取WARP的配置文件，以及安卓，和苹果端如何优选ip，顺带解决一下上一期视频发出后，很多同学遇到的问题。所以没有看上一期视频的同学，建议你先点击右上角观看一下上一期视频，这样才能较好的理解本期内容。废话不多说，首先就是解决一下上一期大家遇到最多的一个问题：1、跳过cloudflare绑定支付方式的问题。其实就是进行到支付页面这一步的时候，关闭整个网页，再重新进入cloudflare即可。2、进行设备绑定的时候，不出现那个绑定设备页面，这个可能是网页的bug吧，也很好解决，只需要先点击其他菜单，再次点击回来就可以了。记住就是在点击的过程中，不能打开网页翻译，需要在关闭翻译的状态下，这样就能看到绑定设备界面了。IP优选1、IP优选需要用到不同的软件，不能再用官方的客户端WARP了，因为WARP使用的就是wireguard协议，所以我们需要用wireguard客户端，只有这个客户端，才能修改配置文件，进行IP优选。wireguard客户端下载：https://www.wireguard.com/install/2、获取配置文件：https://replit.com/@ygkkkk/WARP-Wireguard-Register打开连接，点击运行，选择2，然后选择3团队账户，根据网站提示，获取token，粘贴到网站里，然后获取配置文件。有文字和二维码形式。配置文件是通用的，手机端也是这个配置文件。电脑端优选IP：1、获取完成配置文件之后，就可以在电脑上优选ip了，优选过后，把ip地址和端口，替换到配置文件最后一行的ip地址端口。接着打开wireguard客户端，粘贴配置文件，然后连接即可。2、手机也一样，苹果需要下载wireguardios客户端，注意的是，这里需要一个美区的AppleID进行下载。下载完成之后，打开wireguard，扫描刚刚第二步出来的二维码，之后，就可以点开编辑，替换优选的IP进行连接了。苹果端优选IP：下载软件ISH，打卡之后先更新依赖：然后输入脚本地址：把优选出来的IP第一个，复制粘贴到wireguard配置的对端地址里。安卓端优选IP下载软件termux，下载x86_64.apk的那个升级依赖，升级代码：然后输入脚本地址：把优选出来的IP第一个，复制粘贴到wireguard配置的对端地址里。全文完本文由简悦SimpRead优化，用以提升阅读体验使用了全新的简悦词法分析引擎beta，点击查看详细说明IP优选","link":"https://181016.xyz/post/httpswwwkejicodecnindexphparchives39/"},{"title":"BACKUP GPT4","content":"完全免费使用，只有速度限制gpt4每分钟10条，每天1000条。相比官方的付费订阅，3小时才25条加入DiscordChinmeraGPT群https://discord.gg/aubyc3JY进群后有个验证，找一下verify进去验证。通过验证后，在chat频道，输入/keyget获取key一键部署chatgptnextweb。部署成功后，任何设备中你都能使用网页版的GPT。如果不会部署或只在电脑上用的，跳到4https://github.com/Yidadaa/ChatG...b/main/README_CN.md建议fork到自己名字下，然后部署，这样做可以自动更新有自己服务器也可以用docker部署到自己服务器下，海外服务器比较好有很多开源的前端项目，选这个是因为最容易部署。也可以选其他的。nextweb配置环境变量BASE_URL=https://chimeragpt.adventblocks.ccOPENAI_API_KEY=粘贴第一步的keyCODE=设置网站的访问密码HIDE_USER_API_KEY=1另外可以在vercel里绑定自己的域名可选模型和速度限制:https://chimeragpt.adventblocks.cc/v1/modelsclaude-2-100k也是很强的模型如果回复中有“apikey出错，discord...”的提示，可以清空浏览器缓存：F12进入devtool，application&gt;Storage&gt;LocalStorage&gt;某网站右键清空4.（已经部署好的不用看）安装电脑版客户端windowshttps://github.com/Yidadaa/ChatG...2.8.9_x64-setup.exemachttps://github.com/Yidadaa/ChatG...t.Web_2.8.9_x64.dmg点左下角设置，看图填入参数接口地址：https://chimeragpt.adventblocks.ccAPIKey：粘贴第一步的key就可以直接用了","link":"https://181016.xyz/post/backup-gpt4/"},{"title":"Copilot快捷键","content":"Copilot官方在线文档https://docs.github.com/cn/copilotCopilot快捷键接受建议：Tab拒绝建议：Esc打开Copilot：Ctrl+Enter（会打开一个单独的面板，展示10个建议）下一条建议：Alt/Option+]上一条建议：Alt/Option+[触发行内Copilot：Alt/Option+\\（Copilot还没有给出建议或者建议被拒绝了，希望手工触发它提供建议）","link":"https://181016.xyz/post/copilot-kuai-jie-jian/"},{"title":"Prometheus+Grafana监控Docker容器","content":"一、监控系统概述cAdvisor（ContainerAdvisor）：用于收集正在运行的容器资源使用和性能信息。开源地址：https://github.com/google/cadvisorPrometheus（普罗米修斯）：容器监控系统。官网地址：https://prometheus.io开源地址：https://github.com/prometheusGrafana：是一个开源的度量分析和可视化系统。开源地址：https://grafana.com/grafanacAdvisor（采集所有容器资源利用率，部署在每个docker主机上）-&gt;Prometheus（收集与存储）-&gt;Grafana（可视化展示）原文https://www.ucloud.cn/yun/128125.html","link":"https://181016.xyz/post/prometheusgrafana-jian-kong-docker-rong-qi/"},{"title":"符号连接","content":"什么是符号连接(SymbolicLink)?符号连接从Vista开始就得到支持,属于NTFS内置的功能,符号链接适用于文件、目录。可以理解为一种超级快捷方式。支持相对路径、绝对路径。假设创建symboliclink时使用了相对路径，保存到NTFS中的就是相对路径，不会隐式转换成绝对路径。可以跨盘符，可以跨主机，可以使用UNC路径、网络驱动器等。符号链接旨在帮助迁移和应用程序与UNIX操作系统的兼容性。在Windows10下面创建符号链接非常简单,本文就简要介绍一下.符号连接使用场景现实场景中,很多云服务应用程序只会同步位于自己文件夹中的文件或者特定文件夹中的文件,例如有些程序特别喜欢使用C盘下面某些文件夹(C:\\Users\\用户名\\AppData\\Local),而程序本身并不提供修改这些文件夹的功能。此时就可以通过创建一个符号链接,把这些文件移动到其他目录,但是应用程序还不会报错,它会自动把文件同步到符号链接所指向的文件夹中,就像它从来没有移动过一样.使用命令行创建我们可以通过使用mklink在命令行创建符号链接。点击左下角的按时按钮,输入cmd,然后选择，然后鼠标右键点击命令提示符,在弹出的菜单选择选项“以管理员身份运行”,该命令从WindowsVISTA开始就内置于操作系统中。C:\\Users\\181016.xyz&gt;mklink命令语法不正确。创建符号链接。MKLINK[[/D]|[/H]|[/J]]LinkTarget/D创建目录符号链接。默认为文件符号链接。/H创建硬链接而非符号链接。/J创建目录联接。Link指定新的符号链接名称。Target指定新链接引用的路径(相对或绝对)。使用第三方工具创建符号链接如果你不想在命令提示符下操作，那么可以尝试一下使用第三方工具LinkShellExtension，该工具允许您使用右键菜单创建指向现有文件或目录的符号链接,","link":"https://181016.xyz/post/fu-hao-lian-jie/"},{"title":"测试优先级定义 ","content":"一级功能测试业务场景测试一、TESTCASE的优先级定义测试用例的优先级用于标识测试用例的重要性和执行频率，共分为4级，由高至低依次为P0-P3。P0核心功能测试用例（冒烟测试），确定此版本是否可测的测试用例，此部分测试用例如果fail会阻碍大部分其他测试用例的验证。P1高优先级测试用例，最常执行以保证功能性是稳定的；基本功能测试，和重要的错误、边界测试P2中优先级测试用例，更全面地验证功能的各个方面，异常测试，边界、中断、断网、容错、UI等测试用例P3低优先级测试用例，不常常被执行，性能、压力、兼容性、稳定性、安全、可用性等等。二、如何划分TESTCASE的优先级2.1初步划分1.把所有功能性验证（或基本路径）的测试标注为P1；2.把所有错误、边界值、UI测试标注为P2；3.把所有非功能性的测试（例如性能、可用性、稳定性、安全、兼容等）标注为P3。2.2提升和降级并非所有的功能性测试都一样的重要，并且有些边界和非功能性测试也很重要。思考一下测试的重要性及相对于其他同等优先级别的测试，你想要检查这个功能的频率，考虑质量目标和项目的需求，可以对case重新调整，规则如下：1.把功能性验证测试分为两组：重要和不是十分重要，将“不是十分重要”的功能性验证测试降级为P2；2.把错误和边界测试分成两组：重要和不是十分重要，将“重要”的错误和边界测试升级为P1；3.把非功能性测试分成两组：重要和不是十分重要，把“重要”的非功能性测试升级为P2；4.针对每组高，中和低优先级别的测试用例，重复划分和升级/降级流程直到你达到一个点，可以在不同优先级之间移动的测试用例的数量到最小。注：所谓“重要”，可以理解为：bug多的、用户使用频率高的、最基本的这些概念。2.3挑出冒烟测试用例为了确保小版本是可以测试的并准备好给小组其他成员执行准入测试，需从高优先级别的case中挑选出P0case，规则如下：1.将高优先级别的测试用例分成两组：严重的和重要的，将“严重”的高优先级的测试用例升级为P0级2.4各级别TESTCASE的比例case优先级划分完成后，不同级别所占百分比为：P0:10%-15%，P1:30%-40%，P2:30%-40%，P3:10%-15%。另外，随着项目的进行，通过调研和观察缺陷出现的位置，你可能会重新给你的测试用例划分优先级别。转自：https://www.cnblogs.com/joy-sir/p/12165157.html","link":"https://181016.xyz/post/ce-shi-you-xian-ji-ding-yi/"},{"title":"chrome 的无障碍辅助功能 短暂突出显示焦点对象","content":"最近使用chrome遇到输入框就有一个黑边，很是烦人，但是不知道哪里问题，以为更新了新版的bug，等了一个版本还是老样子。后来怀疑是扩展问题，一个个的禁用，发现还不行。最后无意中想到，是不是可能是个无障碍功能，查了下，还确实是这个原因，关掉开关就行了。","link":"https://181016.xyz/post/chrome-de-wu-zhang-ai-fu-zhu-gong-neng-duan-zan-tu-chu-xian-shi-jiao-dian-dui-xiang/"},{"title":"linux 命令行中对光标常用操作 移动快捷键","content":"有几个常用的快捷键。ctrl+左右键:在单词之间跳转ctrl+a:跳到本行的行首ctrl+e:跳到页尾Ctrl+u：删除当前光标前面的文字（还有剪切功能）ctrl+k：删除当前光标后面的文字(还有剪切功能)Ctrl+L：进行清屏操作Ctrl+y:粘贴Ctrl+u或ctrl+k剪切的内容Ctrl+w:删除光标前面的单词的字符Alt–d：由光标位置开始，往右删除单词。往行尾删Linux命令行快捷键涉及在linux命令行下进行快速移动光标、命令编辑、编辑后执行历史命令、Bang(!)命令、控制命令等。让basher更有效率。说明Ctrl–k:先按住Ctrl键，然后再按k键；Alt–k:先按住Alt键，然后再按k键；M–k：先单击Esc键，然后再按k键。移动光标Ctrl–a：移到行首Ctrl–e：移到行尾Ctrl–b：往回(左)移动一个字符Ctrl–f：往后(右)移动一个字符Alt–b：往回(左)移动一个单词Alt–f：往后(右)移动一个单词Ctrl–xx：在命令行尾和光标之间移动M-b：往回(左)移动一个单词M-f：往后(右)移动一个单词编辑命令Ctrl–h：删除光标左方位置的字符Ctrl–d：删除光标右方位置的字符（注意：当前命令行没有任何字符时，会注销系统或结束终端）Ctrl–w：由光标位置开始，往左删除单词。往行首删Alt–d：由光标位置开始，往右删除单词。往行尾删M–d：由光标位置开始，删除单词，直到该单词结束。Ctrl–k：由光标所在位置开始，删除右方所有的字符，直到该行结束。Ctrl–u：由光标所在位置开始，删除左方所有的字符，直到该行开始。Ctrl–y：粘贴之前删除的内容到光标后。Alt+t：交换光标处和之前两个字符的位置。Alt+.：使用上一条命令的最后一个参数。Ctrl–_：回复之前的状态。撤销操作。Ctrl-a+Ctrl-k或Ctrl-e+Ctrl-u或Ctrl-k+Ctrl-u组合可删除整行。Bang(!)命令!!：执行上一条命令。foobar：把上一条命令里的foo替换为bar，并执行。!wget：执行最近的以wget开头的命令。!wget:p：仅打印最近的以wget开头的命令，不执行。!$：上一条命令的最后一个参数，与Alt-.和$_相同。!*：上一条命令的所有参数!*:p：打印上一条命令是所有参数，也即!*的内容。^abc：删除上一条命令中的abc。foobar：将上一条命令中的foo替换为barfoobar^：将上一条命令中的foo替换为bar!-n：执行前n条命令，执行上一条命令：!-1，执行前5条命令的格式是：!-5查找历史命令Ctrl–p：显示当前命令的上一条历史命令Ctrl–n：显示当前命令的下一条历史命令Ctrl–r：搜索历史命令，随着输入会显示历史命令中的一条匹配命令，Enter键执行匹配命令；ESC键在命令行显示而不执行匹配命令。Ctrl–g：从历史搜索模式（Ctrl–r）退出。控制命令Ctrl–l：清除屏幕，然后，在最上面重新显示目前光标所在的这一行的内容。Ctrl–o：执行当前命令，并选择上一条命令。Ctrl–s：阻止屏幕输出Ctrl–q：允许屏幕输出Ctrl–c：终止命令Ctrl–z：挂起命令重复执行操作动作M–操作次数操作动作：指定操作次数，重复执行指定的操作。————————————————版权声明：本文为CSDN博主「vitrovitro」的原创文章，遵循CC4.0BY-SA版权协议，转载请附上原文出处链接及本声明。原文链接：https://blog.csdn.net/yizhuanlu9607/article/details/109381648","link":"https://181016.xyz/post/linux-ming-ling-xing-zhong-dui-guang-biao-chang-yong-cao-zuo-yi-dong-kuai-jie-jian/"},{"title":"小雅alist","content":"entrypoint.sh#!/bin/sh/bin/busybox-extrashttpd-p82-h/www/usr/sbin/nginx/updateallif[[-f/data/mytoken.txt]]&amp;&amp;[[-s/data/mytoken.txt]];thenuser_token=$(head-n1/data/mytoken.txt)/token$user_tokenecho`date`&quot;User'sowntoken$user_tokenhasbeenupdatedintodatabasesuccefully&quot;fiif[[-f/mytoken.txt]]&amp;&amp;[[-s/mytoken.txt]];thenuser_token=$(head-n1/mytoken.txt)/token$user_tokenecho`date`&quot;User'sowntoken$user_tokenhasbeenupdatedintodatabasesuccefully&quot;fiif[[-f/data/pikpak.txt]]&amp;&amp;[[-s/data/pikpak.txt]];then/pikpakecho`date`&quot;User'sownPikPakaccounthasbeenupdatedintodatabasesuccefully&quot;fiif[-f/www/mobi.tgz];thencd/wwwtarzxfmobi.tgzrmmobi.tgzfiecho-e&quot;129.146.173.211\\tdocker.xiaoya.pro&quot;&gt;&gt;/etc/hostscd/opt/alistexec&quot;$@&quot;token.sh#!/bin/shset-enewtoken=$1sqlite3/opt/alist/data/data.db&lt;&lt;EOFupdatex_storagessetaddition=json_replace(addition,'$.refresh_token',&quot;$newtoken&quot;)wheredriver='AliyundriveShare';EOFupdateall#!/bin/shcd/tmp/if[-findex.zip];thenrmindex.zipfiif[-findex.txt];thenrmindex.txtfiif[-fversion.txt];thenrmversion.txtfiwget-T5-t2-qhttp://docker.xiaoya.pro/version.txtif[!-fversion.txt];thenecho&quot;Failedtodownloadversion.txtfile,theindexfileupgradeprocesshasaborted&quot;elseremote=$(head-n1version.txt)if[!-f/version.txt];thenecho0.0.0&gt;/version.txtfilocal=$(head-n1/version.txt)latest=$(printf&quot;$remote\\n$local\\n&quot;|sort-r|head-n1)if[$remote=$local];thenecho`date`&quot;currentindexfileversionisupdated,noneedtoupgrade&quot;exitelif[$remote=$latest];thenwget-T5-t2-qhttp://docker.xiaoya.pro/index.zipif[!-findex.zip];thenecho&quot;Failedtodownloadindexcompressedfile,theindexfileupgradeprocesshasaborted&quot;exitelseunzip-o-q-Pabcdindex.zipmvindex*.txt/echo`date`&quot;updateindexsuccesfully,yournewversion.txtis&quot;$remoteecho$remote&gt;/version.txtfiwget-T5-t2-qhttp://docker.xiaoya.pro/update.zipif[!-fupdate.zip];thenecho&quot;Failedtodownloadupdatedatabasefile,thedatabaseupgradeprocesshasaborted&quot;exitelseunzip-o-q-Pabcdupdate.zipentries=$(expr`catupdate.sql|wc-l`-4)if[[!-f/data/pikpak.txt]]||[[!-s/data/pikpak.txt]];thensed-i&quot;/PikPakShare/d&quot;update.sqlfiecho`date`&quot;total&quot;$entries&quot;records&quot;sqlite3/opt/alist/data/data.db&lt;&lt;EOFdroptablex_storages;droptablex_meta;droptablex_setting_items;.readupdate.sqlEOFecho`date`&quot;updatedatabasesuccesfully,yournewversionis&quot;$remotefielseecho`date`&quot;yourcurrentversion.txtisupdated,noneedtodowngrade&quot;echo$remote&gt;/version.txtfirmindex.*rmupdate.*rmversion.txtfiexec&quot;$@&quot;guesspass#!/bin/shset-enewtoken=$1sqlite3/opt/alist/data/data.db&lt;&lt;EOFupdatex_userssetpassword=&quot;$newtoken&quot;whereid=2;EOFgzexe-d","link":"https://181016.xyz/post/xiao-ya-alist/"},{"title":"解决windows显示开启HDR后chrome内截图泛白问题","content":"问题再现：在windows显示中开启hdr后在chrome中截图便会出现变色问题。（上图为开启HDR后的显示错误情况，下图为未开启的正常情况）问题分析：猜测是因为chrome会默认匹配系统的颜色管理，但是由于截图瞬间颜色管理出错，所以出现了颜色显示不对。问题解决：在chrome地址栏输入chrome://flags/在页面的搜索栏搜索forcecolorprofile在选项中选择所对应的颜色管理。（此处我选择的是P3）————————————————版权声明：本文为CSDN博主「Athus_c」的原创文章，遵循CC4.0BY-SA版权协议，转载请附上原文出处链接及本声明。原文链接：https://blog.csdn.net/Athus_c/article/details/106494715","link":"https://181016.xyz/post/jie-jue-windows-xian-shi-kai-qi-hdr-hou-chrome-nei-jie-tu-fan-bai-wen-ti/"},{"title":"adb 导出手机中已安装的apk","content":"前提：手机或者运行着Android系统的设备连接到PC端1，查看手机中已安装的所有apk文件adbshellpmlistpackage2，根据要导出的app包名，查看APP安装路径//com.DeviceTest是我要导出的APP包名adbshellpmpathcom.DeviceTest3，根据以上路径导出apk源文件到PC端//app在手机中的存放路径：/system/priv-app/DeviceTest/DeviceTest.apk//app导出的目标apk在PC端的存放路径C:\\Users\\Administrator\\Desktopadbpull/system/priv-app/DeviceTest/DeviceTest.apkC:\\Users\\Administrator\\Desktop————————————————版权声明：本文为CSDN博主「Ang_qq_252390816」的原创文章，遵循CC4.0BY-SA版权协议，转载请附上原文出处链接及本声明。原文链接：https://blog.csdn.net/ezconn/article/details/86506989","link":"https://181016.xyz/post/adb-dao-chu-shou-ji-zhong-yi-an-zhuang-de-apk/"},{"title":"localStorage的存储,读取,删除","content":"localStorage存储我们通过以下方式将数据储存到localStorage中window.localStorage.setItem('key',value)1但有时value为一个对象Object,以上面的方式写入,会出现读取的返回值为{objectObject}的情况,但这并不是我们想要的,此时我们需要使用新的方式传入Objectwindow.localStorage.setItem('param',JSON.stringify(Object))1通过JSON.stringify(Object)方法将对象转化为一个json格式的字符串进行存储localStorage读取我们通过以下方式来读取localStorage中的值window.localStorage.getItem('key')1相对的在读取json格式字符串只有我们也无法直接使用,需要将它转换为josn对象之后才是我们想要的结果,所以我们需要调用JSON.parse()方法来进行转化,之后在继续使用JSON.parse(window.localStorage.getItem('key'))1localStorage删除我们通过以下方法来删除对应key以及key中的内容window.localStorage.removeItem('key')1localStorage清空所有的key清空localStorage中所有的key;注意:请谨慎使用,它会清空所有的本地存储数据window.localStorage.clear()————————————————版权声明：本文为CSDN博主「沈胖三」的原创文章，遵循CC4.0BY-SA版权协议，转载请附上原文出处链接及本声明。原文链接：https://blog.csdn.net/she8362315/article/details/82900662","link":"https://181016.xyz/post/localstorage-de-cun-chu-du-qu-shan-chu/"},{"title":"js 字符串排序","content":"前端开发过程中有时需自己手写排序方法一般想到数字的字符串排序方法我们会用到varnewArr=arr.sort(function(a,b){returna-b})来进行排序但除此之外我们会需要进行一些字符串的排序此时我们可以用到varnewArr=arr.sort(function(a,b){returna.localeCompare(b)})来进行排序但中文排序时发现不是我们想要的可以通过加参数的方法a.localeCompare(b,'zh-CN')这样就ojbk了","link":"https://181016.xyz/post/js-zi-fu-chuan-pai-xu/"},{"title":"清空docker container logs","content":"docker默认会记录容器从一开始运行到现在为止所有的日志内容，而且目前docker并没有提供日志管理工具对日志内容进行清理。只能手工进行清理。找出dockercontainer日志文件所在的路径dockerinspect--format='{{.LogPath}}'&lt;container_name_or_id&gt;删除或者清空日志文件内容echo|sudotee$(dockerinspect--format='{{.LogPath}}'&lt;container_name_or_id&gt;)dockerlogs-f&lt;container_name_or_id&gt;1&gt;/dev/nulldockerlogs-f&lt;container_name_or_id&gt;2&gt;/dev/null原文链接http://blog.lujun9972.win/blog/2019/03/24/%E6%B8%85%E7%A9%BAdocker-container-logs/index.html","link":"https://181016.xyz/post/qing-kong-docker-container-logs/"},{"title":"[LOCALE]字符集设置","content":"转载自这里[LOCALE]字符集设置使用dockerubuntu系统时发现无法在bash上输入中文，以及中文文件乱码问题，查阅了相关资料，发现是因为字符集的关系查询使用命令locale进行字符集查询查询当前已缓存字符集$locale-aCC.UTF-8POSIXzh_CN.utf8查询当前使用的字符集$localeLANG=zh_CN.UTF-8LANGUAGE=zh_CN.UTF-8LC_CTYPE=&quot;zh_CN.UTF-8&quot;LC_NUMERIC=&quot;zh_CN.UTF-8&quot;LC_TIME=&quot;zh_CN.UTF-8&quot;LC_COLLATE=&quot;zh_CN.UTF-8&quot;LC_MONETARY=&quot;zh_CN.UTF-8&quot;LC_MESSAGES=&quot;zh_CN.UTF-8&quot;LC_PAPER=&quot;zh_CN.UTF-8&quot;LC_NAME=&quot;zh_CN.UTF-8&quot;LC_ADDRESS=&quot;zh_CN.UTF-8&quot;LC_TELEPHONE=&quot;zh_CN.UTF-8&quot;LC_MEASUREMENT=&quot;zh_CN.UTF-8&quot;LC_IDENTIFICATION=&quot;zh_CN.UTF-8&quot;LC_ALL=zh_CN.UTF-8各个键值函数参考LocaleLANG：为未显式设置的LC_*变量提供默认值LC_ALL：重写单个LC_*设置：如果设置了LC_ALL，则以下任何一项都不会有任何效果/etc/default/locale当前使用的字符集设置保存在文件/etc/default/locale中$cat/etc/default/localeFilegeneratedbyupdate-localeLANG=zh_CN.UTF-8LANGUAGE=zh_CN.UTF-8LC_ALL=zh_CN.UTF-8设置zh_CN.UTF-8字符集首先使用locale-a查询本地是否已安装zh_CN.UTF-8，如果没有需要下载$locale-genzh_CN.UTF-8下载完成后更新配置文件$update-localeLANG=zh_CN.UTF-8LANGUAGE=zh_CN.UTF-8LC_ALL=zh_CN.UTF-8同时设置环境变量修改文件/etc/profile$sudovim/etc/profile...exportLANG=zh_CN.UTF-8exportLANGUAGE=zh_CN.UTF-8exportLC_ALL=zh_CN.UTF-8重启后即可完成zh_CN.UTF-8字符集设置对于en_US.UTF-8字符集的设置类似无字符集设置参考：Nolocaleset没有/etc/default/locale文件，locale查询结果如下：$locale-aCC.UTF-8POSIX表明当前系统没有区域设置。首先安装配置文件和工具$sudoapt-getinstalllocales其次使用上面的配置流程进行区域配置","link":"https://181016.xyz/post/localezi-fu-ji-she-zhi-p/"},{"title":"如何用油猴提升前端开发效率","content":"原文链接：https://juejin.cn/post/7075237968205578277起因时隔一年，油猴脚本系列又来了，起因是那天洗澡的时候，突然灵光一闪，想到平时在前端开发中，有很多工作完全是一些机械的，没有什么难度的活，但是又异常的花时间！其实就是对一些表格字段。目前为止我还在开发之前的那个百万级ERP项目，项目中的列表非常的多，目前大概有几百个吧，而且每个列表都有非常多的字段，通常情况下都在20个字段左右，而后端写的时候会在对应的接口中返回一大堆字段，你需要从返回的字段中挑选出列表中需要的字段。可能一个两个还好，但是几十个几百个列表一个字段一个字段的对起来就很耗时耗力，所以这个时候我就有一个想法：有没有那么一种方法，将原型图上列表字段提取出来，然后与swagger中该接口下面的字段注释做一个对比，如果对的上，则生成Antd可以使用的表头代码，如果没有对上，那么就统一将这些没有对上的字段展示出来，然后用肉眼去对，如果依然没有找到这些字段，那么就发给后端，让后端添加上这些字段。一想到这个可能性，马上就想迫不及待的想要进行实现，这时我回忆起一年前用过油猴脚本做了一些事情，那么这次这个突发奇想是否也可以用油猴脚本进行实现。油猴脚本我在去年已经写过几篇关于油猴脚本的文章，其中提到过通过Webpack打包，可以开发特别复杂的脚本，甚至可以开发一些工程级的脚本，同时也可以使用npm上的包。但是由于webpack配置的复杂性，所以我首先是没有考虑使用webpack打包工具的，而是先想到了另一个零配置打包工具：parcel。但是很遗憾，失败了，不知道为什么通过parcel打包后的js文件直接通过油猴引入外部资源的方法会报错，于是这个时候我还想到了一个打包js文件的工具：Rollup。遗憾的是，同样失败了，不知道为什么引入油猴后就是会报错，于是这个时候我就放弃抵抗，选择了webpack进行打包，结果不出意料，webpack打包后的js文件引入油猴中没有任何问题。因为我之前已经这么做过了，还总结了相关的文章：强大的油猴Tampermonkey脚本开发环境搭建，所以关于油猴的基础部分就不再赘述。2.1打包的好处为什么要通过webpack打包？因为在编写一些复杂脚本时，我们往往会需要使用到非常多的库，而且也会将脚本进行模块化，分成非常多的文件，同时如果你还想编写一些CSS样式，那么你也可以直接写CSS文件或者Less或者Sass文件，通过webpack可以将这些文件统一起来，打包成一个js，然后通过油猴提供的外部引入方式进行引入。随着我对React越发的得心应手，要实现上面说的自动比对字段的功能React也是不可少的一环，而我个人非常喜欢使用TypeScript，因为它会给予代码更多的提示，让你在写代码的时候不容易犯一些低级错误。而使用React的时候就不得不提到Antd，Antd这个UI组件库提供了非常多的方便的组件，不光是解决了一些样式问题，同时它还解决了很多交互层面的东西，比如它的Form表单，也是非常好用的。综上所述，如果你要开发一个油猴脚本，那么通过webpack进行打包就是一个非常好的选择。jQuery正如我年前的那篇文章所说，jQuery是一个非常值得学习的库，因为对于编写油猴脚本来说，没有什么比用jQuery去提取界面上的信息更方便的了。由于jQuery的易用性，使用jQuery你可以轻易的从界面上提取到你要的信息，虽然使用正则可以达到差不多的效果，但jQuery代码写起来比正则更快，也更不容易出错。正则编写脚本，非常多的情况会使用到正则，因为要精确的匹配到对应的字符，正则是你的不二之选，在做一些自动生成代码工具的时候，因为涉及到字符匹配的问题，学会正则就显得非常的重要。这里就要推荐一个非常好的正则测试网站：RegExr:学习、构建和测试正则表达式TestRegEx，因为有时候你无法判断你写的正则对不对，所以这个时候你就可以先在这个网站上面测试一下，如果测试结果符合你的预期，再将正则表达式复制到你的项目中进行测试，这样编写起正则来就方便的多，使用方法也非常简单，去该网站上面点两下大致就能明白如何使用。爬虫基础如果你要提取一些界面上的信息，那么你得会一些爬虫基础知识，知道怎么获取到界面上的某些信息。理论上一个网页上面所有的信息，都能通过正则表达式进行提取，但由于正则表达式在编写的过程中可能会比较容易出错，这个时候jQuery就能有效的帮你提取出这些页面数据。这里就对爬虫入门时90%的人都会选择的豆瓣排行榜做一个页面信息提取。实例上面所想的那个脚本我其实已经实现了，但碍于swagger上面有公司项目的接口信息，所以这里就不拿那个脚本作为演示。那么这里我就拿jQuery爬取到的豆瓣排行榜信息作为演示吧：主要实现的功能就是，在输入框中输入电影名称，然后将电影相关的信息进行匹配并且展示出来：6.1触发事件构建要执行你已经写好的代码，你通常可能需要一个按钮、一个输入框或者其它元素进行触发，在本脚本的开发中，我就使用了Antd的按钮+Antd的模态框+Antd的输入框这3种组件来搭建脚本。6.2最终效果最终的效果像下面这样，代码其实并不难。这里贴上最终的代码：import{Button,ConfigProvider,Form,Modal}from&quot;antd&quot;;import&quot;antd/dist/antd.css&quot;;importTextAreafrom&quot;antd/es/input/TextArea&quot;;importzhCNfrom&quot;antd/lib/locale/zh_CN&quot;;import*as$from&quot;jquery&quot;;import{useState}from&quot;react&quot;;import{render}from&quot;react-dom&quot;;interfaceInfoDataList{/**电影的名称/title:string;/*分数/score:string;/*评价数/number:string;/*简介*/info:string;}functionAppButton(){const[infoDataList,setInfoDataList]=useState&lt;InfoDataList[]&gt;([]);const[showData,setShowData]=useState();const[visible,setVisible]=useState(false);return(&lt;&gt;&lt;ButtononClick={()=&gt;{/**整理后的信息*/constinfo:InfoDataList[]=[];//这里是提取界面信息$(&quot;.info&quot;).each(function(this){constinfoItem:InfoDataList={}asInfoDataList;//这里是所有的信息，下面组件提取各种信息$(this).find(&quot;.title&quot;).each(function(this,index){//只取第一个电影名字if(index===0)infoItem.title=this.innerHTML;});//取分数$(this).find(&quot;.rating_num&quot;).each(function(this){infoItem.score=this.innerHTML;});//评价数$(this).find(&quot;.star&gt;span:nth-child(4)&quot;).each(function(this){infoItem.number=this.innerHTML;});//取信息$(this).find(&quot;.inq&quot;).each(function(this){infoItem.info=this.innerHTML;});info.push(infoItem);});setInfoDataList(info);//打开弹窗setVisible(true);}}style={{position:&quot;fixed&quot;,right:&quot;100px&quot;,bottom:&quot;100px&quot;}}&gt;点我&lt;/Button&gt;&lt;Modaltitle=&quot;自动对字段&quot;visible={visible}centereddestroyOnClosewidth={1000}onCancel={()=&gt;{setVisible(false);}}&gt;&lt;Formpreserve={false}onValuesChange={async(value)=&gt;{//如果没有值，则不匹配if(!value.text){setShowData(undefined);return;}constrgx=RegExp(value.text);constdata=infoDataList.find((item)=&gt;rgx.test(item.title));setShowData(data);}}&gt;&lt;Form.Itemname=&quot;text&quot;&gt;&lt;TextArearows={10}/&gt;&lt;/Form.Item&gt;&lt;/Form&gt;{/*这里是将对的字段展示出来*/}&lt;ul&gt;&lt;li&gt;电影名：{showData?.title}&lt;/li&gt;&lt;li&gt;分数：{showData?.score}&lt;/li&gt;&lt;li&gt;评价数：{showData?.number}&lt;/li&gt;&lt;li&gt;简介：{showData?.info}&lt;/li&gt;&lt;/ul&gt;&lt;/Modal&gt;&lt;/&gt;);}//添加一个div作为React的入口文件$(&quot;body&quot;).append(&lt;divid=&quot;ccll-app&quot;/&gt;);render(,document.getElementById(&quot;ccll-app&quot;));复制代码7.webpack配置下面是我自己搭建并且使用的一套webpack.config.js，添加了对CSS、TypeScript、Less的支持，并且还对JavaScript做了兼容性处理，可以直接将下面的代码复制过去尝试。const{resolve}=require(&quot;path&quot;);module.exports={entry:[&quot;./index.js&quot;],output:{path:resolve(__dirname,&quot;build&quot;),filename:&quot;index.js&quot;,publicPath:&quot;/&quot;,},module:{rules:[{test:/.(js|jsx|mjs)/,exclude:/node_modules/,use:[{loader:&quot;babel-loader&quot;,options:{//预设：指示babel做怎么样的兼容性处理。presets:[[&quot;@babel/preset-env&quot;,{corejs:{version:3,},//按需加载useBuiltIns:&quot;usage&quot;,},],&quot;@babel/preset-react&quot;,],},},],},{test:/.tsx?/,use:&quot;ts-loader&quot;,exclude:/node_modules/,},{test:/.css/,//使用哪些loader进行处理use:[//use数组中loader执行顺序：从右到左，从下到上依次执行//创建style标签，将js中的样式资源插入进行，添加到head中生效&quot;style-loader&quot;,//将css文件变成commonjs模块加载js中，里面内容是样式字符串&quot;css-loader&quot;,],},{test:/.less/,//使用哪些loader进行处理use:[//use数组中loader执行顺序：从右到左，从下到上依次执行//创建style标签，将js中的样式资源插入进行，添加到head中生效&quot;style-loader&quot;,//将css文件变成commonjs模块加载js中，里面内容是样式字符串&quot;css-loader&quot;,{loader:&quot;less-loader&quot;,options:{lessOptions:{javascriptEnabled:true,},},},],},],},resolve:{extensions:[&quot;.tsx&quot;,&quot;.ts&quot;,&quot;.js&quot;],},mode:&quot;production&quot;,devtool:&quot;source-map&quot;,};复制代码8.最后本篇文章没有拿我的那个最终实现的脚本进行演示，而是模拟了另一个例子，主要是起到一个抛砖引玉的作用，我想表达的意思就是油猴被我们前端开发者所忽略了，其实它是一个非常好的能够提升开发效率的工具。从文章中可以看到，编写一个脚本需要掌握的知识还是比较多的，尤其是jQuery和正则，当然如果你对原生js熟悉的话，你完全可以使用原生js代码来代替jQuery的那些代码。就我个人编写油猴脚本的经验来讲，jQuery几乎在每个脚本中都会用到，虽然用到的东西不是特别深，主要是提取界面信息，而正则用到的也非常多。其实这里还留下了一个问题，就是引入了React+Antd后，打包的时间往往会达到10s左右，而打包后的代码通常会达到2M左右，下一篇文章就讲如何在油猴中使用CDN引入，让打包时间减少到1s左右，代码体积减少到几十kb左右。通过这次的灵光乍现，我想到平时在写业务代码时，一些重复的机械的工作都可以交给脚本去实现，提高自己的开发效率，做一个准点下班的程序员。作者：沧沧凉凉链接：https://juejin.cn/post/7075237968205578277来源：稀土掘金著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。快速上手油猴插件开发（实战篇）5分钟上手开发浏览器插件——油猴脚手架wokoo(使用篇)wokoo脚手架（搭建篇）Chrome插件大杀器：「油猴」Tampermonkey使用详解","link":"https://181016.xyz/post/ru-he-yong-you-hou-ti-sheng-qian-duan-kai-fa-xiao-lu/"},{"title":"后端解决跨域问题---SpringBoot","content":"/**解决跨域问题*/@ConfigurationpublicclassCrosConfigimplementsWebMvcConfigurer{@OverridepublicvoidaddCorsMappings(CorsRegistryregistry){registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;&quot;).allowedMethods(&quot;GET&quot;,&quot;HEAD&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;,&quot;OPTIONS&quot;).allowCredentials(flase).maxAge(3600).allowedHeaders(&quot;&quot;);}}©著作权归作者所有：来自51CTO博客作者Frank___7的原创作品，请联系作者获取转载授权，否则将追究法律责任后端解决跨域问题---SpringBoothttps://blog.51cto.com/u_15305087/5003897","link":"https://181016.xyz/post/hou-duan-jie-jue-kua-yu-wen-ti-springboot/"},{"title":"ubuntu 安装docker portainer","content":"安装curlsudoaptinstallcurl安装dockercurl-fsSLhttps://get.docker.com|bash-sdocker--mirrorAliyun================================================================================TorunDockerasanon-privilegeduser,considersettinguptheDockerdaemoninrootlessmodeforyouruser:dockerd-rootless-setuptool.shinstallVisithttps://docs.docker.com/go/rootless/tolearnaboutrootlessmode.ToruntheDockerdaemonasafullyprivilegedservice,butgrantingnon-rootusersaccess,refertohttps://docs.docker.com/go/daemon-access/WARNING:AccesstotheremoteAPIonaprivilegedDockerdaemonisequivalenttorootaccessonthehost.Refertothe'Dockerdaemonattacksurface'documentationfordetails:https://docs.docker.com/go/attack-surface/================================================================================安装portainerdockerrun-d-p9000:9000-v/var/run/docker.sock:/var/run/docker.sock--restart=always--nameprtainerportainer/portainer安装docker-composeUbuntu下可以通过aptinstalldocker-compose不过版本比较老bash脚本或者Dockerfile需要从github下载最新版的文件。https://api.github.com/repos/{owner}/{repo}/releases/latest#获取最新版本号tag_name=`curl-shttps://api.github.com/repos/docker/compose/releases/latest|greptag_name|cut-f4-d&quot;\\&quot;&quot;`#下载最新版地址：sudocurl-L&quot;https://github.com/docker/compose/releases/download/$tag_name/docker-compose-$(uname-s)-$(uname-m)&quot;-o/usr/local/bin/docker-compose#下载完成后，将可执行权限应用于文件：sudochmod+x/usr/local/bin/docker-compose#验证安装是否成功，请运行以下命令，该命令将打印Compose版本：docker-compose--version#要卸载DockerCompose，只需输入以下命令即可删除二进制文件：sudorm/usr/local/bin/docker-compose获取github上最新版shell","link":"https://181016.xyz/post/ubuntu-an-zhuang-docker-portainer/"},{"title":"ubuntu sudo命令响应慢解决办法。","content":"背景修改用户名后出现了sudo命令相应很慢的情况，经过了解认定为主机名查询表问题。问题原因在系统第一次安装时，系统已经自动将127.0.0.1指向了本机名，写入了/etc/hosts文件。hosts文件是Linux系统中一个负责IP地址与域名快速解析的文件，可以定义IP地址和主机名之间的映射，对于服务器类型的linux系统其作用还是不可忽略的。解决方法查看本机的hostnamehostname修改主机名表sudovim/etc/hosts在文件中添加一行，127.0.0.1hostname（1中查询到的本机名）————————————————版权声明：本文为CSDN博主「littlepeanut.top」的原创文章，遵循CC4.0BY-SA版权协议，转载请附上原文出处链接及本声明。原文链接：https://blog.csdn.net/qq_33275276/article/details/105060217","link":"https://181016.xyz/post/ubuntu-sudo-ming-ling-xiang-ying-man-jie-jue-ban-fa/"},{"title":"基于Sentry搭建前端异常监控系统","content":"背景虽然在我们的项目上线前会有很多的测试流程，但是测试流程肯定无法保证100%覆盖所有操作场景，在用户的使用过程中仍会有一些问题暴露出来。但当线上用户出现问题，我们需要收到用户的一个反馈，才能去定位解决，这样会导致我们的问题解决不够及时。并且有些疑难杂症，我们无法复现定位，这时候我们需要得知用户的环境、操作等信息，以便于对问题进行排查。基于以上三点考虑，我认为在大部分项目中都需要接入一个异常监控系统，来实现收集异常、收集日志信息、及时警告、展示统计信息等功能。为什么选择Sentry？免费Sentry可直接使用也可自行搭建兼容性强，基本不受语言限制，搭建一套系统可用于多个项目。Sentry可适用平台Sentry简介Sentry'sapplicationmonitoringplatformhelpseverydeveloperdiagnose,fix,andoptimizetheperformanceoftheircode.Sentry的应用程序监视平台可帮助每个开发人员诊断，修复和优化其代码的性能。Sentry部署及使用Sentry可直接使用也可自行搭建，下面将讲解Sentry的搭建过程。想要直接体验的可以跳过直接戳官网进行体验。官方提供安装方式是使用Docker和DockerCompose以及基于bash的安装和升级脚本。环境要求Docker19.03.6+Compose1.24.1+4CPUCores8GBRAM20GBFreeDiskSpacePython3这里就不对环境的配置进行详细说明，想自己搭建的同学可以参考下以下文章。yum方式安装升级docker新装的CentOS7安装python3部署步骤从github上获取Sentry最新代码。gitclonehttps://github.com/getsentry/onpremise.git进入onpremise，运行install.sh脚本。cdonpremise./install.sh运行docker-composeup-d以启动Sentry。按照默认配置构建后，Sentry默认绑定9000端口，访问http://127.0.0.1:9000即可进入登录页面。打开页面填写信息后即可进入Sentry系统初始化界面自动发送警告邮件配置，可以从上图配置，也可以从配置文件配置，下面为通过config.yml配置教程。打开onpremise/sentry下的config.yml文件，修改MailServer配置内容。异常警告发送邮件配置mail.backend：邮件发送方式；mail.host:邮件发送域名，使用的哪个邮箱可以去该邮箱文档中找到smtp发送域名；mail.port:邮件发送的端口号；mail.username：用于smtp邮箱的账号；mail.password：用于smtp邮箱的密码；mail.use-tls：是否使用tls安全协议，这里填写true或false，和use-ssl配置互斥；mail.use-ssl：是否使用ssl安全协议，这里填写true或false，和use-tls配置互斥；mail.from：收到邮件时的发送人名称；通过配置文件修改邮件服务后，需要运行docker-composeup-d更新Sentry，如果更新失败则需要关闭docker-compose后重新运行。docker-composedowndocker-composebuilddocker-composeup-d重启后可通过头像-&gt;admin-&gt;mail进入mail配置页，点击发送测试邮件来检测是否配置成功。测试邮件服务配置Sentry设置通过HTTPS访问有没有发现上面Sentry的启动地址还有DSN地址都是http，现在要给Sentry配置ssl让我们能通过https使用。首先要修改onpremise/sentry/config.ymlsystem.url-prefix配置，将其设置为我们访问的Sentry域名。url-prefix组成了项目的DSN地址，一定要保证格式正确。system.url-prefix:'https://sentry.xxxxx.com:60000'然后是onpremise/sentry/sentry.conf.py文件下的SSL/TLS配置，将原来注释的部分全部打开。修改SSL/TLS配置修改完后同样要将docker-compose关掉重建。docker-composedowndocker-composebuilddocker-composeup-d上面的配置只是让Sentry允许通过SSL代理，下面我们需要在服务器内搭建一个nginx用来转发https协议内容，搭建的过程不多说，百度或者请教运维大大。下面是我的nginx配置，配好nginx并重启后就算大功告成。我们的Sentry终于可以通过https访问了！server{#配置监听端口listen60000sslhttp2default_server;listen[::]:60000sslhttp2default_server;#域名server_namesentry.xxxxx.cn;#nginx默认根目录root/usr/share/nginx/html;#加载其他配置文件，这里是nginx默认配置，可以不需要include/etc/nginx/default.d/*.conf;#ssl设置sslon;#ssl证书地址ssl_certificate/etc/nginx/sslcert/server.crt;#ssl密钥地址ssl_certificate_key/etc/nginx/sslcert/server.key;ssl_session_cacheshared:SSL:1m;ssl_session_timeout10m;ssl_protocolsTLSv1TLSv1.1TLSv1.2;ssl_ciphersEECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;ssl_prefer_server_cipherson;client_max_body_size200M;client_body_buffer_size1024k;#这一段是最重要的，将域名代理到本机http://localhost:9000服务上，对应的就是docker内的sentry服务location/{proxy_passhttp://localhost:9000;}gzipon;gzip_http_version1.1;gzip_varyon;gzip_comp_level9;gzip_proxiedany;gzip_typestext/plaintext/cssapplication/jsonapplication/x-javascripttext/xmlapplication/xmlapplication/xml+rsstext/javascriptapplication/x-shockwave-flashimage/pngimage/x-iconimage/gifimage/jpeg;gzip_buffers168k;error_page404/404.html;location=/404.html{}error_page500502503504/50x.html;location=/50x.html{}}Sentry接入实例通过上面的过程Sentry系统就搭建好了，访问配置的地址即可进入Sentry系统。没有搭建的朋友们，也可以直接通过官网体验下面接入项目的过程。创建项目进入系统后点右上角的NewProject创建项目。Sentry创建项目这里以React项目为例，建立一个React项目，按照页面提示即可在项目中注册Sentry，对系项目执行中出现的异常进行捕捉。Sentry接入项目及初始化配置Sentry配置应在应用程序的生命周期中尽早进行。完成此操作后，Sentry的JavaScriptSDK会捕获所有未处理的异常和事务。init参数详解：Sentry.init({//Sentry项目的dsn，可从项目设置中获取dsn:&quot;https://xxxxxx@161.xxx.xxx.xxx:9000/2&quot;,//初始参数配置内容integrations:[newIntegrations.BrowserTracing()],//触发异常后发送给Sentry的概率tracesSampleRate:1.0,//控制应捕获的面包屑(行为栈)的总量maxBreadcrumbs:20,//规定上下文数据结构的深度，默认为3normalizeDepth:100,//版本信息release:&quot;common@1.0.0&quot;,//环境信息environment:process.env.NODE_ENV,//钩子函数，在每次发送event前触发beforeSend(event){//网页应用刷新后设置的变量会消失，所以我选择在beforeSend触发时插入用户信息event.user={userNick:&quot;xiaohu&quot;,};returnevent;},});设置变量在Sentry中，可以使用set+tags，extra，contexts，user，level，fingerprint形式，设置变量。下面将简单介绍几种方式，详情使用方法可见文档。通过setUser设置全局变量用户信息示例（不建议使用）捕捉异常还需要采集用户信息，在用户登录后需要通过setUser设置一下用户信息全局变量，如下所示。注意，通过这种方式设置的全局变量在页面刷新后会消失。设置用户信息代码：Sentry.setUser({tenant:{code:12345,name:'测试公司',_id:12345},orgAccount:{_id:54321,orgName:'是机构啦'},user:{_id:'8910JQ',loginName:'测试人员小Q'}})设置全局变量后触发的issue中，可看到上传的用户数据。自定义user数据展示通过beforeSnd插入用户信息通过Sentry机制设置的全局变量在页面刷新后会消失，这边我建议通过beforeSend函数，修改event中的数据来插入需要的全局变量。Sentry.init({...,//钩子函数，在每次发送event前触发beforeSend(event){//在这里可根据业务情况发送用户信息event.user={userNick:'xiaohu'};returnevent;}});设置全局变量//以下是Sentry定义的全局变量，可以直接使用Sentryapi设置Sentry.setUser(object);Sentry.tags(object);Sentry.extra(object);Sentry.level(object);Sentry.fingerprint(object);//通过setContext，设置key值，可自定义随事件传递的变量名Sentry.setContext(key,context);设置局部变量captureException是我常用的一种设置局部变量并上传报错的方式，Sentry.captureException(err[,obj])第一个参数为抛出的异常，第二个参数可附加错误信息。第二个参数为对象，key值可为tags，extra，contexts，user，level，fingerprint这6种。Sentry.captureException(error,{contexts:{message:{a:1,b:{b:1},},},});设置局部变量网络报错信息示例根据目前前端框架所用的axios，对网络请求出错的局部数据进行收集，代码示例：Sentry.captureException(error,{contexts:{message:{url:error.response.config.baseURL+error.response.config.url,data:error.response.config.data,method:error.response.config.method,status:error.response.status,statusText:error.response.statusText,responseData:JSON.stringify(error.response.data),},},});清除全局变量在用户退出登录后需要清除该用户的用户信息，有以下两种方式。通过设置为空，可以清除设置过的数据。Sentry.setUser();通过scope.clear()清除全局变量。Sentry.configureScope((scope)=&gt;scope.clear());//清除所有全局变量Sentry.configureScope((scope)=&gt;scope.setUser(null));//清除user变量上传日志信息有时我们不仅仅要收集异常信息，还需要在页面中打log来收集页面运行数据，这时可以用Sentry.captureMessage(err[,obj])api，进行传输日志。使用方法与captureException一致，建议将level设置为Info，便于与异常区分开来，避免触发我们设置的异常警报。Sentry.captureMessage(&quot;Somethingwentfundamentallywrong&quot;,{contexts:{text:{hahah:22,},},level:Sentry.Severity.Info,});上传sourceMapSentry可将前端项目打包后的SourceMap上传，方便我们查看异常所在的代码位置。Sentry集成sourcemap卸载sentry需要卸载可参考以下链接。如何卸载Sentry？触发一个异常看看onClick={()=&gt;{leta={};console.log(a.b.c);}}在这里我制造了一个异常代码，点击后大家可想而知会出现一个jserror，如下图。在network中我们可以看到一条请求，Sentry就是通过这样的方式上传错误的。然后转到Sentry系统页面上，可以看到Issues面板中多了一条信息：点击进入后可以看到关于这条异常的详细信息。可以看到，详情里收集了大量的异常相关数据，如设备、浏览器版本、ip地址、error数据、用户操作栈等数据。但光有这些数据是不够的，原始的上传信息有时也不足以分析问题，很多时候我们需要根据业务场景定制所采集的数据。下面我们将从捕捉场景和采集内容这两方面进行分析。异常信息捕捉场景及采集内容捕捉场景针对前端常见业务场景，总结了以下几个场景需要收集业务报错信息。接口错误网络错误jserror报错主要业务流程异常状态iframe/webview内部错误以上异常如果触发了jserror或者Promise.reject并且没有被抛出，会被Sentry自动捕捉到，如果没有自动触发可手动newError或Promise.reject(error)抛出异常，即可被Sentry收集。或者使用captureMessageApi收集运行日志。采集内容尽管SentrySDK会捕获所有未处理的异常和事务汇报至系统上，并且会记录产生异常的页面及设备信息。但是有这些信息是远远不够的，还需要额外的业务信息，用于更好的区别定位问题。下面是我对上报异常所需要收集的内容进行总结。异常信息：抛出异常的error信息，Sentry会自动捕捉。用户信息：用户的信息（登录名、id、level等），所属机构信息，所属公司信息。行为信息：用户的操作过程，例如登陆后进入xx页面，点击xx按钮，Sentry会自动捕捉。版本信息：运行项目的版本信息（测试、生产、灰度），以及版本号。设备信息：项目使用的平台，web项目包括运行设备信息及浏览器版本信息。小程序项目包括运行手机的手机型号、系统版本及微信版本。时间戳：记录异常发生时间，Sentry会自动捕捉。异常等级：根据Sentry文档分为以下几个等级。CriticalDebugErrorFatalInfoLogWarning平台信息：记录异常发生的项目。有以上内容的补全，再加上原有的异常数据，对于一个报错是不是就更清晰明了了呢。小程序接入SentrySentry无官方api用于提供给小程序，好在有第三方根据提供的库，可使用原有api实现小程序端的异常监控。安装npminstallsentry-mina--saveyarnaddsentry-mina将browser/sentry-mina.js拷贝到项目中使用import*asSentryfrom&quot;sentry-mina/browser/sentry-mina.js&quot;;//import*asSentryfrom&quot;sentry-mina&quot;;//configSentrySentry.init({dsn:&quot;&quot;,});//Setuserinformation,aswellastagsandfurtherextrasSentry.configureScope((scope)=&gt;{scope.setUser({id:&quot;4711&quot;});scope.setTag(&quot;user_mode&quot;,&quot;admin&quot;);scope.setExtra(&quot;battery&quot;,0.7);//scope.clear();});//AddabreadcrumbforfutureeventsSentry.addBreadcrumb({message:&quot;MyBreadcrumb&quot;,//...});//Captureexceptions,messagesormanualeventsSentry.captureMessage(&quot;Hello,world!&quot;);Sentry.captureException(newError(&quot;Goodbye&quot;));Sentry.captureEvent({message:&quot;Manual&quot;,stacktrace:[//...],});其他内容见文档Sentry小程序SDK。问题总结下面是我在接入Sentry及后续使用时遇到的问题。consolelog不显示sourmap地址consolelog不显示sourmap地址这个问题产生的原因是，Sentry会修改原生console方法收集console，所以这边不会显示sourcemap地址，可以在开发环境下取消注册Sentry。本文首发于我的博客mogii'blog欢迎大家光临~https://segmentfault.com/a/1190000040237095","link":"https://181016.xyz/post/ji-yu-sentry-da-jian-qian-duan-yi-chang-jian-kong-xi-tong/"},{"title":"docker ttnode arm64","content":"dockerrun-itd-v/mnt/sda1/ttnode:/mnt/data/ttnode-v/var/run/docker.sock:/var/run/docker.sock--namettnode--hostnamettnode1--net=host--privileged=true--restart=alwaysregistry.cn-hangzhou.aliyuncs.com/tiptime/ttnode:latestdockerrun-d-v/mnt/disk:/mnt/data/ttnode-v/var/run/docker.sock:/var/run/docker.sock--namettnode--hostnamettnode--net=host--restart=always--memory=2g--cpus=1.5registry.cn-hangzhou.aliyuncs.com/tiptime/ttnode:latest","link":"https://181016.xyz/post/docker-ttnode-arm64/"},{"title":"开源流媒体服务器SRS学习笔记(1) - 安装、推流、拉流","content":"SRS(SimpleRTMPServer)是国人写的一款非常优秀的开源流媒体服务器软件，可用于直播/录播/视频客服等多种场景，其定位是运营级的互联网直播服务器集群。1一、安装官网提供了3种安装方式：从源码编译安装、利用docker（学习用)、直接下载安装包安装相信很多人主要目的是出于学习srs如何使用，对c++语言本身可能并不擅长，所以本文仅介绍&quot;如何利用安装包&quot;安装部署。先从官网下载最新的稳定发布版本(目前是2.0r6)http://ossrs.net/srs.release/releases/files/SRS-CentOS6-x86_64-2.0.263.zip然后将其上传到centos服务器,并解压到指定目录，执行下面的命令安装：sudo./INSTALL点击查看原图安装成功后，会出现类似上图的提示。如果出现Nopackagelsb_releaseavailable.的错误提示（centos7上容易出现这个错误），可尝试先安装yuminstall-yredhat-lsbtips:如果要卸载，可执行以下命令（前提是先停止srs）sudorm-rf/usr/local/srssudorm-rf/etc/init.d/srs二、启动/停止2.1启动sudo/etc/init.d/srsstart2.2停止sudo/etc/init.d/srsstop类似的，除了start/stop，还有其它选项，比如：reload|status1[~]$/etc/init.d/srs2Usage:/etc/init.d/srs{start|stop|status|restart|reload}三、推流测试推流：即向流媒体服务器发布视频（支持本地文件或摄像头做为视频源)3.1用FFmpeg推流FFmpeg是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源软件，利用它可以将本机视频文件推到SRS上。从FFmpeg官网下载后，直接解压到本机即可运行。tips:srs源码自带了一个示例flv,路径为./trunk/doc/source.200kbps.768x320.flv推流命令(mac环境)：./ffmpeg-re-isource.200kbps.768x320.flv-vcodeccopy-acodeccopy-fflv-yrtmp://srs_server_ip:1935/live/livestream注:上述命令中的flv完整路径，以及srsserverip，大家根据情况自行替换为实际值。另外：默认情况下srs的rtmp采用1935端口，如果该端口被占用或修改了srs.conf中的端口，注意根据情况调整；防火墙如果开了，也要检测下1935是否允许访问。复制代码./ffmpeg-re-i/Users/jimmy/code/srs/trunk/doc/source.200kbps.768x320.flv-vcodeccopy-acodeccopy-fflv-yrtmp://...:1935/live/livestreamffmpegversion4.1.3-tessushttps://evermeet.cx/ffmpeg/Copyright(c)2000-2019theFFmpegdevelopersbuiltwithAppleLLVMversion10.0.1(clang-1001.0.46.3)configuration:--cc=/usr/bin/clang--prefix=/opt/ffmpeg--extra-version=tessus--enable-avisynth--enable-fontconfig--enable-gpl--enable-libaom--enable-libass--enable-libbluray--enable-libfreetype--enable-libgsm--enable-libmodplug--enable-libmp3lame--enable-libmysofa--enable-libopencore-amrnb--enable-libopencore-amrwb--enable-libopus--enable-librubberband--enable-libshine--enable-libsnappy--enable-libsoxr--enable-libspeex--enable-libtheora--enable-libtwolame--enable-libvidstab--enable-libvo-amrwbenc--enable-libvorbis--enable-libvpx--enable-libwavpack--enable-libx264--enable-libx265--enable-libxavs--enable-libxvid--enable-libzimg--enable-libzmq--enable-libzvbi--enable-version3--pkg-config-flags=--static--disable-ffplaylibavutil56.22.100/56.22.100libavcodec58.35.100/58.35.100libavformat58.20.100/58.20.100libavdevice58.5.100/58.5.100libavfilter7.40.101/7.40.101libswscale5.3.100/5.3.100libswresample3.3.100/3.3.100libpostproc55.3.100/55.3.100Input#0,flv,from'/Users/jimmy/code/srs/trunk/doc/source.200kbps.768x320.flv':Metadata:major_brand:isomminor_version:512compatible_brands:isomiso2avc1mp41encoder:Lavf54.63.104Duration:00:03:30.73,start:0.034000,bitrate:251kb/sStream#0:0:Video:h264(High),yuv420p(progressive),768x320[SAR1:1DAR12:5],212kb/s,25fps,25tbr,1ktbn,50tbcStream#0:1:Audio:aac(LC),44100Hz,stereo,fltp,30kb/sOutput#0,flv,to'rtmp://10.2.72.62:1935/live/livestream':Metadata:major_brand:isomminor_version:512compatible_brands:isomiso2avc1mp41encoder:Lavf58.20.100Stream#0:0:Video:h264(High)([7][0][0][0]/0x0007),yuv420p(progressive),768x320[SAR1:1DAR12:5],q=2-31,212kb/s,25fps,25tbr,1ktbn,1ktbcStream#0:1:Audio:aac(LC)([10][0][0][0]/0x000A),44100Hz,stereo,fltp,30kb/sStreammapping:Stream#0:0-&gt;#0:0(copy)Stream#0:1-&gt;#0:1(copy)Press[q]tostop,[?]forhelpframe=508fps=25q=-1.0size=693kBtime=00:00:20.24bitrate=280.4kbits/sspeed=1x复制代码顺利的话，会看到类似上面的输出，表示正在向srs推送视频流。3.2用obs采集摄像头推流FFmpeg的命令行方式不太友好，推荐使用主流的OBS开源推流软件，可从官网https://obsproject.com/下载最新版本，目前很多网络主播都是用它做直播。该软件支持本地视频文件以及摄像头推流。3.2.1文件推流先添加一个：“媒体源”然后新建一个名称（随便输入）选择本机视频文件接下来是关键的部分，进入设置：点击看源图在串流-&gt;服务器这里，输入srs的地址：rtmp://srs_server_ip:1935/live(注意这里不要带livestream),然后在串流密钥这里，才是输入livestream点击看源图设置好以后，就可以点击“开始推流”了。如果顺利，下面的状态栏，会显示一些实时数据：点击看源图3.2.2摄像头推流跟上面的其实差不多，区别只是添加“视频捕捉设备”然后选择本机检测到的摄像头设备(比如：下图为mac笔记本自带的FaceTimeHDCamera)接下来的操作就一样了：四、拉流测试拉流：即从流媒体服务器读取视频流(说白了：就是播放)推荐使用开源的VLC播放器(当然其它任何支持网络媒体源播放的player其实都行），File-&gt;OpenNetwork，输入地址rtmp://srs_server_ip:1935/live/livestream点击看源图顺利的话，就可正常播放。点击看源图作者：菩提树下的杨过https://www.cnblogs.com/yjmyzz/p/srs_study_1_install_push_and_pull_stream.html出处：http://yjmyzz.cnblogs.com本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。","link":"https://181016.xyz/post/kai-yuan-liu-mei-ti-fu-wu-qi-srs-xue-xi-bi-ji-1-an-zhuang-tui-liu-la-liu/"},{"title":"VsCode中使用Emmet神器快速编写HTML代码","content":"一、Emmet简述#Emmet(前身为ZenCoding)是一个能大幅度提高前端开发效率的一个工具.在前端开发的过程中，一大部分的工作是写HTML、CSS代码。特别是手动编写HTML代码的时候，效率会特别低下，因为需要敲打很多尖括号，而且很多标签都需要闭合标签等。于是，就有了Emmet，它可以极大的提高代码编写的效率，它提供了一种非常简练的语法规则，然后立刻生成对应的HTML结构或者CSS代码，同时还有多种实用的功能帮助进行前端开发。VsCode内置了Emmet语法,在后缀为.html/.css中输入缩写后按Tab键即会自动生成相应代码请注意在VsCode新版本中按Tab不再默认启用Emmet展开缩写!需要在首选项配置中将emmet.triggerExpansionOnTab设置为true值!语法基本规则如下:CopyE代表HTML标签。E#id代表id属性。E.class代表class属性。E[attr=foo]代表某一个特定属性。E{foo}代表标签包含的内容是foo。E&gt;N代表N是E的子元素。E+N代表N是E的同级元素。E^N代表N是E的上级元素。本文仅介绍了在Html使用Emmet,如果想Css缩写的语法请参考这里https://docs.emmet.io/css-abbreviations/二、基础用法#元素(Elements)您可以使用元素的名称，如div或p来生成HTML标签。Emmet没有一组可用的标签名称，可以写任何单词并将其转换为标签。也就是只要知道元素的缩写,Emmet会自动转换成对应标签.形如:Copydiv=&gt;foo=&gt;html:5=&gt;将生成html5标准的包含body为空基本domhtml:xt=&gt;生成XHTML过渡文档类型,DOCTYPE为XHTMLhtml:4s=&gt;生成HTML4严格文档类型,DOCTYPE为HTML4.01a:mail=&gt;a:link=&gt;base=&gt;br=&gt;link=&gt;script:src=&gt;form:get=&gt;label=&gt;input=&gt;inp=&gt;input:hidden=&gt;input:h亦可input:email=&gt;input:password=&gt;input:checkbox=&gt;input:radio=&gt;select=&gt;option=&gt;bq=&gt;btn=&gt;btn:s=&gt;btn:r=&gt;文本操作符(Text)如果想在生成元素的同时添加文本内容可以使用{}Copydiv{这是一段文本}这是一段文本a{点我点我}点我点我属性操作符(Attributeoperators)属性运算符用于修改输出元素的属性.Id和Class(elem#idandelem.class)Copydiv.test=&gt;div#pageId=&gt;隐式标签则会自动联想生成对应元素,根据配置规则不同生成的结果也是不同的.Copy.class=&gt;em>.class=>table>.row>.col=>绑定多个类名用.符号连续起来即可Copydiv.test1.test2.test3=&gt;自定义属性使用[attr1=''attr2='']Copya[href='#'data-title='customer'target='_blank']=>嵌套操作符(Nestingoperators)嵌套操作符用于将缩写元素放置在生成的树中,是否应放置在上下文元素的内部或附近.子级:&gt;通过&gt;标识元素可以生成嵌套子级元素,可以配合元素属性进行连写Copydiv#pageId&gt;ul&gt;li=&gt;同级:++字符表示生成兄弟级元素.Copydiv#pageId+div.child=>父级:^用于生成父级元素的同级元素,从这个字符所在位置开始,查找左侧最近的元素的父级元素并生成其兄弟级元素.Copydiv>p.parent>span.child^ul.brother>li=>分组操作符(Grouping)分组使用()来实现缩写的分离.比如这个例子,如果不加括号那么a将作为span的子级元素生成.加上括号a将于()内的元素同级.Copydiv&gt;(ul&gt;li+span)&gt;a=&gt;乘法(Multiplication)使用N即可自动生成重复项.N是一个正整数.在使用时请注意N所在位置,位置不同生成的结果不同.Copyul>li*3=>自动计数(numbering)这个功能挺方便的对于生成重复项时增加一个序号,只需要加上$符号即可.Copyul>li.item${itemnumber:$}*3itemnumber:1itemnumber:2itemnumber:3如果生成两位数则使用两个连续的$$,更多位数以此类推...使用@修饰符，可以更改编号方向（升序或降序）和基数（例如起始值）.注意这个操作符在$之后添加@-表示降序,@+表示升序,默认使用升序.@N可以改变起始值.需要注意的是如果配合升降序使用的话N是放到+-符后.Copyul&gt;li.item$@-*3=&gt;---------------------------ul>li.item$@-10*3=>上述的操作是可以搭配使用进而得出酷炫的效果,使用时请注意空格的问题,缩写代码不要有空格否则是不会进行转换的.另外如果你的编辑器中已经有了一些html智能提示代码段,比如我的VsCode还装了HTMLSnippets插件,这个与Emmet语法有部分冲突,使用Tab键时会优先使用插件的代码提示,建议禁用.组合起来看看效果:Copytable.table-row[role='table']&gt;(thead&gt;tr&gt;td{item@120}*5)+(tbody&gt;tr&gt;(td.item$@-)lorem10*5)这段目的在于生成一个类名为table-row,且自定义了属性role的table标签,内部包含了thead与tbody,分别生成5个td.thead中td的内容是item加上自增序号,自增序号基数从120开始.tbody中td拥有一个名为item加降序自增符号类名,且每个td内容随机填充10个单词.Copyitem120item121item122item123item124Loremipsumdolorsitamet,consecteturadipisicingelit.Odit,assumenda.Magnampossimusmolestiasipsumanimiremplaceat,utobcaecatilaudantium.Consequuntur,laboreadoptiocupiditateiustodoloresfugitquidemofficiis.Veniam,explicaboconsequunturblanditiisatdictafugarationeeosbeatae.Fugavoluptatumilloquisducimusadevenietnon.Saepe,eveniet.再来个配合嵌套元素和计数的大栗子.Copydiv.nav&gt;(nav#navbar&gt;(ul&gt;li&gt;(a[href=&quot;/xxx/product/&quot;data−index=&quot;data-index=&quot;data−index=]&gt;lorem4)*5))+div.btn[type='button']&gt;span{--}^^div#main这个有点复杂,看下效果:CopyLoremipsumdolorsit.Dolorvel,quiaquas.Quihic,corruptieum!Necessitatibusperspiciatis,corrupti.Praesentium!Nostrumquos,voluptate.Velit!--三、进阶高级用法#模拟文本/随机文本在开发时经常要填充一些文本内容占位,Emmet内置了LoremIpsum功能来实现.loremN或者lipsumN,N表示生成的单词数,正整数.可以不填.Copylorem=>Loremipsumdolorsitamet,consecteturadipisicingelit.Suscipitquiacommodiverosintomnisfugiatexcepturireiciendisnecessitatibustotamasperiores,delectussaepenullaconsequunturnostrum!Saepesuscipitrecusandaerepellendusassumenda.p&gt;lorem4=&gt;Loremipsumdolorsit.(p&gt;lorem4)*3=&gt;Loremipsumdolorsit.Laboreaperiam,consequunturarchitecto.Quidemnisi,cumodio!包装文本听起来可能有点绕,通俗点解释就是把一段指定的文本包装成我们想要的结构.注意这个功能需要编辑器的支持,举个大栗子:比如PM给了这样一段文本Copy首页产品介绍相关案例关于我们联系我们而我们预期的效果是这样首页产品介绍相关案例关于我们联系我们选中文本,按下ctrl+shift+p打开命令窗口输入ewrap选择Emmet:使用缩写进行包装(WrapwithAbbreviation)选项输入缩写字符nav&gt;ul&gt;li按下回车键即可看到效果.当然也可以在菜单=&gt;编辑=&gt;Emmet(M)..然后输入.这里需要的注意的地方是输入的缩写代码中所在位置不同得到的效果也是不同的.另外如果给的文本带有序号的情况,我们也是可以通过缩写来处理,而不是手动删除,主要用的是|t来处理.比如:Copy1.首页2.产品介绍3.相关案例4.关于我们5.联系我们输入包装字符命令nav&gt;ul&gt;li*|t即可看到生成的html中自动去掉了序号针对上边说的几种情况来演示一下.利用好Emmet来快速编写html代码,能提升工作效率不用在一个个敲闭合标签,简直是我等偷懒党神器.赶快去耍耍吧.作者：浮云也是种寂寞出处：http://www.cnblogs.com/summit7ca/","link":"https://181016.xyz/post/vscode-zhong-shi-yong-emmet-shen-qi-kuai-su-bian-xie-html-dai-ma/"},{"title":"Macbook pro 2017 安装windows 10","content":"从msdn.itellyou.cn现在win10最新版，发现bootcamp复制出错，上网一查bootcamp给的临时分区为FAT32，不支持4G以上的文件。那就下载老版本的win10.找到一个2015年的老版本，镜像大概在3.8G，不大于4G，但是安装时提示需要64位windows10或更高版本的iso檔案，版本太低还不行，最后网上搜索发现可以对ISO文件中的install.wim文件进行分割，使复制时不出错。具体方法看下面的文件即可。UsinglargerWindows10ISOswithBootCampAssistant","link":"https://181016.xyz/post/macbook-pro-2017-an-zhuang-windows-10/"},{"title":"使用telegram-cli签到","content":"arm64的telegram-clidocker镜像比较少，在dockerhub找了几个，其中ugeek/telegram-cli:arm还算行，但是原来的启动命令无法联网。需要下面的命令来启动dockerrun-dit--nametelegram-cli--hostnametelegram--restartalways--networkhost-eTZ=Asia/Shanghaiugeek/telegram-cli:arm容器建立后，还需要修改localtime才行。ln-s/usr/share/zoneinfo/Aisa/Shanghai/etc/localtime这样定时任务的时间应该就对了。可以在crontab中echodate查看时间是否正确crontab定时任务时间是否设置正确，可以通过crontab.guru来查看关于telegram-cli如何使用可以查看下面的文章。https://www.bgegao.com/2019/09/1500.html查看各个平台的telegram-clihttps://pkgs.org/download/telegram-cli","link":"https://181016.xyz/post/shi-yong-telegram-cli-qian-dao/"},{"title":"直流电与交流电的优缺点比较","content":"原文链接19世纪80年代曾经有过一场关于使用“交流电”还是使用“直流电”的激烈争论。提倡使用直流电的代表人物是大名鼎鼎的发明家爱迪生，主张改用交流电的代表人物则是后起之秀特斯拉。发电机发明以后，电能就在工农业生产和日常生活的各个方面得到了广泛的应用。起初是采用直流电的方式输电和供电，由于输电的电压较低，所以在输电线路上的热损失就较大，因此每一平方英里的地区就需要一个单独的直流发电机供电，而且还要用大量较粗的铜线。为了解决上述缺点，特斯拉发明了以交流发电机供电的“交流多相电力传输系统”，由于使用变压器以高电压、低电流的方式输电，就大大地降低了输电线路上的热损失，实现了远距离输电，从而不需要大量分散的单机供电，输电导线的载面也大大地减小了。由此交流供电系统广为社会采用，最终这场竞争以特斯拉的胜利而结束。随着科学技术的不断进步与发展，那么如今直流电与交流电技术发展现状又是如何呢？我们从以下几个方面对直流电与交流电的优缺点进行比较：（1）发电：对水电、火电、核电等常见发电方式，在发电量相同条件下，交流电的发电设备比直流发电设备要简单，交流电占有优势。而光伏发电更便于接入直流电网，可以省去DC/AC逆变环节，减少成本、降低损耗。（2）输电：①输送相同功率时，直流输电所用线材仅为交流输电的2／3～1／2。直流输电采用两线制，与采用三线制三相交流输电相比，在输电线载面积相同和电流密度相同的条件下，即使不考虑趋肤效应，也可以输送相同的电功率，而输电线和绝缘材料可节约1／3。如果考虑到趋肤效应和各种损耗（绝缘材料的介质损耗、磁感应的涡流损耗、架空线的电晕损耗等），输送同样功率交流电所用导线截面积大于或等于直流输电所用导线的截面积的1.33倍。同时，交流电对绝缘要求更高，也增加了电缆成本。因此，直流输电所用的线材几乎不到交流输电的一半，可以节省输电线与架设费用。②在电缆输电线路中，直流输电没有电容电流产生，而交流输电线路存在电容电流，引起损耗。③直流输电发生故障的损失比交流输电小。直流输电线路当一极发生故障时，只需停运故障极，另一极仍可输送不少于一半功率的电能；但在交流输电线路中，任一相发生永久性故障，必须全线停电。因此直流电在长距离输电这一导致其“败北”的因素之一环节，已完成了对交流电的“逆转”。近年，我国已兴建及在建了多条特高压直流输电线路。（3）变电：交流电最大的优势在于通过变压器就能很方便地升高或降低电压等级，而直流电电压无法通过变压器进行升压或降压，只能通过专门的电子电路进行升压或降压变换。（4）储电：储能系统能很大程度上缓解供配电在地域、时间上的峰谷差异以及分布式能源波动性等问题，减少能源浪费。储能设备都是直流，更方便接入直流电网，接入交流电网需要AC/DC转换。（5）配电：目前交流配电系统面临着线路损耗大、电压瞬时跌落、电压波动、电网谐波、三相不平衡现象等一系列电能质量问题。而直流配电网的线路损耗小；直流配电网供电可靠性高，交流配电一般采用三相四线或五线制，而直流配电只有两根输电线路，线路的可靠性比相同电压等级的交流线路要高；直流配电不涉及相位、频率控制，和无功功率及交流充电电流等问题；直流配电网便于分布式电源、储能装置等接入；直流线路的“空间电荷效应”使电晕损耗和无线电干扰都比交流线路小，产生的电磁辐射也小，具有环保优势。直流配电推广面临的问题更多在于变电环节以及庞大的设施更替规模。（6）用电：随着半导体、数字电路、信息技术的发展，如今，用户侧越来越多的负荷，如LED、手机、计算机、电视机等设备的内部供电都是基于直流。包括电动车等新能源的兴起也增加了直流负荷应用。交流电有幅值、频率、相位三个量需要控制，而直流电只需要控制电压幅值，控制更加简单稳定，直流电器也更绿色节能。随着直流微电网的推进及智慧家居行业的发展，未来直流家电也会成为一大增长点。可以看到随着科学技术的进步发展，直流电应用拥有广阔的发展前景。当然，直流电网目前也有部分技术问题亟待解决或提高，如直流漏电保护、DC/DC电压等级变换、直流电弧熄灭等。","link":"https://181016.xyz/post/zhi-liu-dian-yu-jiao-liu-dian-de-you-que-dian-bi-jiao/"},{"title":"增加或删除swap分区","content":"原文链接设置交换分区了，下面是增加或删除swap分区方法：首先，检查分区：free-htotalusedfreesharedbuff/cacheavailableMem:470M69M271M3.6M129M386MSwap:512M0B512M如果出现上面Swap字样说明你的VPS是存在swap分区的，这个时候想调整分区大小，俺们就要先删除原有分区，再创建。找到swapfile文件：find/-nameswapfilecd到存放swapfile的文件夹停用swap空间：swapoffswapfile删除swapfile文件：rmswapfile上面完事后就等于删除swap分区了，接下来创建swap分区。cd/&amp;&amp;mkdirswap&amp;&amp;cdswap创建swap文件，后面的1024是分区大小1g，自己可以根据需要调整。ddif=/dev/zeroof=swapfilebs=1Mcount=1024将文件标记为交换空间：mkswapswapfile启用该交换文件:swaponswapfile另建议给swapfile文件权限为600，也就是root权限，以免出现安全隐患:chmod600swapfile再次检查一下swap分区是否可用：swapon--show最后，设置swap分区为开机自动挂载：echo&quot;/swap/swapfilenoneswapsw00&quot;&gt;&gt;/etc/fstab建议swap分区大小和RAM大小保持差不多即可。","link":"https://181016.xyz/post/zeng-jia-huo-shan-chu-swap-fen-qu/"},{"title":"js 模块化","content":"模块化开发传统开发的问题，1、命名冲出2、文件依赖模块化开发浏览器上面个的模块化AMD(require.js)CMD(sea.js)服务器上面的模块化commonJS大一统的模块化ES6模块化导入import导出exportnodejs体验ES6模块化需要babel","link":"https://181016.xyz/post/js-mo-kuai-hua/"},{"title":"windows 通过端口号查看对应的进程","content":"现在海康威视安装插件后，可以在chrome中查看摄像头视频了，之前对chrome有要求，需要低版本chrome（可以使用npapi插件的版本）。现在通过websocket的方式实现的，使用端口为15900，通过netstat-ano|findstr&quot;15900&quot;找到对应PID然后通过tasklist|findstr”PID”，找到对应的进程，发现是“WebControl.exe”提供的服务。","link":"https://181016.xyz/post/windows-tong-guo-duan-kou-hao-cha-kan-dui-ying-de-jin-cheng/"},{"title":"ONVIF Device Test Tool测试工具使用方法","content":"原文链接海康相机支持onvif协议，因此可以通过该协议来获得视频数据以及控制相机云台，在正式写代码控制之前，先使用onvif测试工具进行简单的测试，保证相机相关配置正确。1工具下载测试工具使用ONVIFDeviceTestTool，具体下载地址可自行百度，一路默认安装即可。我使用的2相机配置在这里插入图片描述进入海康相机设置平台，选择配置-高级配置-勾选启用ONVIF-添加用户-输入登陆用户名和密码-保存以上即可完成相机ONVIF的相关配置3连接设备接下来可在ONVIFDeviveTestTool测试工具中测试相机了，打开测试软件在这里插入图片描述首先在NIC中选择与相机同一网段的网卡，点击DiscoverDevices，即可搜索到在该网段支持ONVIF协议的网络相机在这里插入图片描述首先在发现设备列表中选择目标相机，在右侧信息中会自动填写相机的参数，然后填写用户名和密码，点击check，即可获得相机的Brand、Model等参数，即第4点钟的信息填写完成，表面设备配置成功在这里插入图片描述首先在发现设备列表中选择目标相机，在右侧信息中会自动填写相机的参数，然后填写用户名和密码（因为基于ONVIF协议搜索摄像头需要鉴权，即认证登录），点击check，即可获得相机的Brand、Model等参数，即第4点钟的信息填写完成，表面设备配置成功4视频测试这一步我们使用测试工具获得相机视频，首先切换到“Debug”选项卡点击“Media”（对应音频和视频等媒体的探测与控制）“Get”MediaURL“Get”MediaProfile，发现默认选中的是“TestMediaProfile”选择“mainStream(Profile_1)”，即可自动获得Video和Audio的相关参数点击下方PlayVideo即可打卡相机视频，如图所示在这里插入图片描述在左上方“Authentication”中选择权限验证方式（None为不发送用户名密码，WS-Usernametoken是onvif标准的用户名密码验证方式，Digest是RTSP中的Digest形式，用户名密码就是从Discovery那里读过来的）。不要旋转None，否则会”AccessDenied。“5PTZ测试云台测试方法与视频测试方法类似，切换到PTZ选项卡–GetURLs–GetProfile–选择mainStream–PTZControl在PTZControl中用多种控制模式，分别是绝对位置控制、相对位置控制和连续控制，可自行测试看看效果在这里插入图片描述6Requests模式除了使用上述方法来控制云台外，我们还可以使用Requests的方式来发送指令，同时收到Response在这里插入图片描述如图所示为PTZ测试示例，有几个地方要注意：1是要把Service和ServiceAddress修改为要测试的模块地址，2是注意模板中的PorfileToken要修改为自己的Profile，默认的prof0，3是注意修改设置xy的数值设置完成后，点击SendRequest，当返回200OK时表明测试成功。同样的，我们可以使用类似的流程来测试其它功能，比如测试DeviceManagement模块的GetCapabilities功能，发送及接收如图所示在这里插入图片描述https://blog.csdn.net/m0_37287361/article/details/83827350","link":"https://181016.xyz/post/onvif-device-test-tool-ce-shi-gong-ju-shi-yong-fang-fa/"},{"title":"openwrt下安装vim","content":"openwrt下默认安装的是VI，使用vim命令也是一个alias到vi的，vi打开中文文件出现乱码。所以空间允许的情况下，还是安装vim完整版比较号opkgupdateopkginstallvim-fullvim-runtime如果安装时显示Packagesizemismatch则使用--force-checksum参数opkg--force-checksuminstallvim-fullvim-runtimeopenwrt默认使用的shell是ash，初始化配置在/etc/profile，alias定义在/etc/shinit。","link":"https://181016.xyz/post/openwrt-xia-an-zhuang-vim/"},{"title":"zerotier 用起来真好","content":"周末的时间把斐讯的N1盒子刷入了openwrt固件，也写入到了emmc中去（通过ddbr方式）写入emmc后就可以使用docker功能了，安装几个镜像后，就牵扯到一个管理问题，但是盒子在家不能随时管理，在固件VPN子栏目下发现了zerotier，研发了一番，注册账号，把盒子添加到网络中，笔记本也添加到网络中，同时在zerotier后台将做了一个路由表，这样不管是访问盒子，还是盒子所在的局域网都是没有问题的。相当的方便。参考zerotier连入内网op中zerotier自动允许客户端NAT的设置方法ZeroTier内网穿透简要介绍及简明设置方法重点关注三、（6）路由器防火墙设置关于Padavan下的zerotier内网穿透设置这个基本是纯手动安装了，如果自己刷的固件没zerotier，可以参考这个来","link":"https://181016.xyz/post/zerotier-yong-qi-lai-zhen-hao/"},{"title":"ubuntu 20.10 有线连接无法显示解决办法","content":"sudonmclinetworkingon搜索半天最后通过这个方式显示了。ubuntu20.04wirednetworksettingismissing","link":"https://181016.xyz/post/ubuntu-2010-you-xian-lian-jie-wu-fa-xian-shi-jie-jue-ban-fa/"},{"title":"vim 普通身份编辑root的文件无法保存","content":"出现这种问题时，在命令行输入:w!sudotee%命令:w!{cmd}，让vim执行一个外部命令{cmd}，然后把当前缓冲区的内容从stdin传入。tee是一个把stdin保存到文件的小工具。而%，是vim当中一个只读寄存器的名字，总保存着当前编辑文件的文件路径。所以执行这个命令，就相当于从vim外部修改了当前编辑的文件，好完工。参考网页Su-write","link":"https://181016.xyz/post/vim-pu-tong-shen-fen-bian-ji-root-de-wen-jian-wu-fa-bao-cun/"},{"title":"中签率低不一定大涨","content":"之前中签京东健康，上市首日100元整就给卖了，后面一度涨到了180，后悔不已，这次中签清科创业，中签率是2%，认为中签率很低，应该可以涨一波，暗盘从11块涨到15块，收益在1600多吧，但是觉得上市首日应该能赚不少，就等首日，结果高开低走，就一直没卖，但是估计回到15块难了。中签率低不代表一定能大涨中签率高的不一定就涨的少涨多涨少跟中签率没关系遵守纪律，暗盘或者首日卖出股票，不要打新变炒股。","link":"https://181016.xyz/post/zhong-qian-lu-di-bu-yi-ding-da-zhang/"},{"title":"docker容器随随docker服务启动而启动","content":"原文链接一、我们的需求让Docker容器跟随宿主机启动而启动二、Restartpolicy机制Docker提供了Restartpolicy机制，可以在容器退出或者Docker重启时控制容器能够自启动。这种Restartpolicy可以保证相关容器按照正确顺序启动。虽然也可以通过进程监控的方式(如systemd)来完成这种动作，但Docker还是建议尽量避免使用进程监控的方式来&quot;自启动&quot;容器。Docker的Restartpolicy与dockerd命令的--live-restore启动标志还有区别：–live-restore标志可以在Docker升级的时候保证容器继续运行，但是网络以及用户终端输入会被中断。那到底什么是restartpolicy呢？我们来看看实际的情况吧。三、dockerrun的restart参数在使用dockerrun启动容器时，使用–restart参数来设置：dockerrun-m512m--memory-swap1G-it-p58080:8080--restart=always--namebvrfis--volumes-fromlogdatamytomcat:4.0/root/run.sh1–restart具体参数值详细信息：no-容器不自动重启on-failure-容器退出状态不为0时自动重启on-failure:[n]-容器退出状态不为0时自动重启，最大尝试n次always-始终尝试自动重启如果创建时未指定--restart=always,可通过update命令设置dockerupdate--restart=always容器名称1在使用on-failure参数时，指定Docker将尝试重新启动容器的最大次数。默认情况下，Docker将尝试永远重新启动容器。尝试重启redis容器10次dockerrun--restart=on-failure:10redis1四、举例验证接下来我们通过举例来验证[root@docker~]#dockerrun-i-t-d--namecentos_aways--restart=alwayscentose278cabec91e36f5582d92ba3ddb95ac17a0c2c59d8cdcc60791a28075e8abce[root@docker~]#dockerps-lCONTAINERIDIMAGECOMMANDCREATEDSTATUSPORTSNAMESe278cabec91ecentos&quot;/bin/bash&quot;5secondsagoUp4seconds[root@docker~]#init6#重启机器[root@docker~]#dockerps-lCONTAINERIDIMAGECOMMANDCREATEDSTATUSPORTSNAMESe278cabec91ecentos&quot;/bin/bash&quot;3minutesagoUpAboutaminute123456789Docker服务重启后，查看添加了--restart=always参数的容器能否自动启动[root@docker~]#/etc/init.d/dockerstopStoppingdocker:[OK][root@docker~]#/etc/init.d/dockerstartStartingdocker:[OK][root@docker~]#dockerpsCONTAINERIDIMAGECOMMANDCREATEDSTATUSPORTSNAMES14caa9ab03a9dockerui/dockerui&quot;/dockerui&quot;11minutesagoUp3seconds0.0.0.0:9000-&gt;9000/tcpdockerui_qinwene278cabec91ecentos&quot;/bin/bash&quot;AboutanhouragoUp3secondscentos_aways12345678在这里我们看到两台容器的状态还是up五、Restartpolicy细节使用Restartpolicies时需要注意如下细节：容器只有在成功启动后restartpolicy才能生效。这里的&quot;成功启动&quot;是指容器处于up至少10秒且已经处于docker监管。这是避免没有成功启动的容器陷入restart的死循环。如果手动（manually）的stop(与前面的explicitlystopped有何区别)一个容器，容器设置的restartpolicy将会被忽略，除非Dockerdaemon重启或者容器手动重启。这是避免了另外一种死循环。restartpolicies只能用于容器，对于swarmservices其restartpolicies有不通过的配置。六、多个容器使用时的注意事项1.用docker自带的--link把多个容器链接在一起，有重启或升级的问题，比如很多容器都依赖于db这个容器，然后db容器重启了，重启时docker分配的ip会变，导致其他依赖于db的容器都要重启。2.–link链接的容器还有启动顺序的问题，需要先启动db容器再启动其他依赖于db的容器，这样导致--link和--restart=always不能一起用，如果一起用会发现宿主机重启了，docker容器并没有全部重启。3.因为这时候docker容器是同时被启动的，并不知道启动顺序。最后决定不用--link链接容器了","link":"https://181016.xyz/post/docker-rong-qi-sui-sui-docker-fu-wu-qi-dong-er-qi-dong/"},{"title":"虚拟机挂起再恢复 docker容器无法访问","content":"现象虚拟机挂起后再恢复，docker内启动的容器无法访问网上搜索的信息是ipv4转发被禁用了，通过修改/etc/sysctl.conf中的net.ipv4.ip_forward=0将这条改为1，然后重启网络即可，sudosystemctlrestartnetwork上面的命令在centos下可能好使，但是在ubuntu20.10下无效sudosystemctlrestartNetworkManager上面这条命令是可行的。挂起前的ipa1:lo:&lt;LOOPBACK,UP,LOWER_UP&gt;mtu65536qdiscnoqueuestateUNKNOWNgroupdefaultqlen1000link/loopback00:00:00:00:00:00brd00:00:00:00:00:00inet127.0.0.1/8scopehostlovalid_lftforeverpreferred_lftforeverinet6::1/128scopehostvalid_lftforeverpreferred_lftforever2:ens33:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscfq_codelstateUPgroupdefaultqlen1000link/ether00:0c:29:13:91:e9brdff:ff:ff:ff:ff:ffaltnameenp2s1inet192.168.6.128/24brd192.168.6.255scopeglobaldynamicnoprefixrouteens33valid_lft1540secpreferred_lft1540secinet6fe80::b9bb:f89b:2b73:77ff/64scopelinknoprefixroutevalid_lftforeverpreferred_lftforever3:docker0:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuestateUPgroupdefaultlink/ether02:42:da:9f:7e:fdbrdff:ff:ff:ff:ff:ffinet172.17.0.1/16brd172.17.255.255scopeglobaldocker0valid_lftforeverpreferred_lftforeverinet6fe80::42:daff:fe9f:7efd/64scopelinkvalid_lftforeverpreferred_lftforever5:veth16781c9@if4:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuemasterdocker0stateUPgroupdefaultlink/ether36:f6:3e:99:39:22brdff:ff:ff:ff:ff:fflink-netnsid1inet6fe80::34f6:3eff:fe99:3922/64scopelinkvalid_lftforeverpreferred_lftforever7:veth81c92d7@if6:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuemasterdocker0stateUPgroupdefaultlink/ether4a:a4:63:50:3c:42brdff:ff:ff:ff:ff:fflink-netnsid0inet6fe80::48a4:63ff:fe50:3c42/64scopelinkvalid_lftforeverpreferred_lftforever挂起恢复后的ipa1:lo:&lt;LOOPBACK,UP,LOWER_UP&gt;mtu65536qdiscnoqueuestateUNKNOWNgroupdefaultqlen1000link/loopback00:00:00:00:00:00brd00:00:00:00:00:00inet127.0.0.1/8scopehostlovalid_lftforeverpreferred_lftforeverinet6::1/128scopehostvalid_lftforeverpreferred_lftforever2:ens33:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscfq_codelstateUPgroupdefaultqlen1000link/ether00:0c:29:13:91:e9brdff:ff:ff:ff:ff:ffaltnameenp2s1inet192.168.6.128/24brd192.168.6.255scopeglobaldynamicnoprefixrouteens33valid_lft1767secpreferred_lft1767secinet6fe80::b9bb:f89b:2b73:77ff/64scopelinknoprefixroutevalid_lftforeverpreferred_lftforever3:docker0:&lt;BROADCAST,MULTICAST&gt;mtu1500qdiscnoqueuestateDOWNgroupdefaultlink/ether02:42:da:9f:7e:fdbrdff:ff:ff:ff:ff:ff5:veth16781c9@if4:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuemasterdocker0stateUPgroupdefaultlink/ether36:f6:3e:99:39:22brdff:ff:ff:ff:ff:fflink-netnsid1inet6fe80::34f6:3eff:fe99:3922/64scopelinkvalid_lftforeverpreferred_lftforever7:veth81c92d7@if6:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuemasterdocker0stateUPgroupdefaultlink/ether4a:a4:63:50:3c:42brdff:ff:ff:ff:ff:fflink-netnsid0inet6fe80::48a4:63ff:fe50:3c42/64scopelinkvalid_lftforeverpreferred_lftforever可以看出docker0在恢复后ipv4ipv6均没有启动成功。问题应该出在这里。通过iplinksetdocker0up将docker0网卡启动起来，但是看到的信息ipv4未分配IP1:lo:&lt;LOOPBACK,UP,LOWER_UP&gt;mtu65536qdiscnoqueuestateUNKNOWNgroupdefaultqlen1000link/loopback00:00:00:00:00:00brd00:00:00:00:00:00inet127.0.0.1/8scopehostlovalid_lftforeverpreferred_lftforeverinet6::1/128scopehostvalid_lftforeverpreferred_lftforever2:ens33:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscfq_codelstateUPgroupdefaultqlen1000link/ether00:0c:29:13:91:e9brdff:ff:ff:ff:ff:ffaltnameenp2s1inet192.168.6.128/24brd192.168.6.255scopeglobaldynamicnoprefixrouteens33valid_lft1775secpreferred_lft1775secinet6fe80::b9bb:f89b:2b73:77ff/64scopelinknoprefixroutevalid_lftforeverpreferred_lftforever3:docker0:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuestateUPgroupdefaultlink/ether02:42:da:9f:7e:fdbrdff:ff:ff:ff:ff:ffinet6fe80::42:daff:fe9f:7efd/64scopelinkvalid_lftforeverpreferred_lftforever5:veth16781c9@if4:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuemasterdocker0stateUPgroupdefaultlink/ether36:f6:3e:99:39:22brdff:ff:ff:ff:ff:fflink-netnsid1inet6fe80::34f6:3eff:fe99:3922/64scopelinkvalid_lftforeverpreferred_lftforever7:veth81c92d7@if6:&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;mtu1500qdiscnoqueuemasterdocker0stateUPgroupdefaultlink/ether4a:a4:63:50:3c:42brdff:ff:ff:ff:ff:fflink-netnsid0inet6fe80::48a4:63ff:fe50:3c42/64scopelinkvalid_lftforeverpreferred_lftforeverDocker网络配置Docker端口映射及虚拟机挂起重开无法远程访问的理解玩转DockerNetworkDocker网络之理解bridge驱动docker容器默认的网络模型","link":"https://181016.xyz/post/xu-ni-ji-gua-qi-zai-hui-fu-docker-rong-qi-wu-fa-fang-wen/"},{"title":"港股入场费","content":"港股入场费原来一直以为入场费为__一手股数*申购价上限__，今天看艾德给的通知邮件发现不是的，网上搜了下才知道为__(1+1.0077%)一手股数申购价上限；__（2）认购与费用一般公司正式公布招股书那天，投资者可以认购新股。认购期3天至一周，在此期间都可以填写认购申请。打新需要的费用，包括入场费+手续费+孖展利息（如有）入场费：申购一手新股所需费用，入场费=(1+1.0077%)一手股数申购价上限；注：入场费中包含的「1.0077%一手股数申购价上限」的费用，在没有中签的情况下，该笔费用将退还。&gt;（1.0077%为：1%的经纪佣金+0.0027%证监会征费+0.005%联交所交易费）。手续费：申购过程中券商收取的费用；https://zhuanlan.zhihu.com/p/145762675","link":"https://181016.xyz/post/gang-gu-ru-chang-fei/"},{"title":"港股打新","content":"1开哪个证券公司的户？通过上面的图片可以查看各个证券公司的收费情况等。我这主要使用现金打新，选择了艾德。2如何入金因为没有港卡，又不想使用sib和华美进行中转，开户的时间选择了艾德，然后办了一张民生卡，可以直接入金。3入金手续费汇出行民生电讯费50手续费25汇入行工行亚洲160手续费4打新农夫山泉600股未中现金百胜1手未中融资利息13手续费100乐享互动现金一手福禄控股现金一手明源云融资一手利息9.5手续费100","link":"https://181016.xyz/post/gang-gu-da-xin/"},{"title":"投标","content":"🤡#投标😐##这样的效果如何","link":"https://181016.xyz/post/tou-biao/"}]}